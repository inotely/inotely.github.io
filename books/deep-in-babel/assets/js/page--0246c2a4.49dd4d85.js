(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{491:function(t,s,e){"use strict";e.r(s);var a=e(1),r=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("Babel 对源码的转译涉及 2 个部分:")]),t._v(" "),e("p",[t._v("一个是语法类。比如箭头函数 "),e("code",[t._v("() => {}")]),t._v(" 转译为普通函数 "),e("code",[t._v("function() {}")]),t._v("。")]),t._v(" "),e("p",[t._v('一个是补丁类。针对转译产物"运行时（runtime）"做的一些处理，该部分主要处理API对宿主环境的兼容问题、转译产物尺寸优化等问题，比如为低版本浏览器提供数组的 '),e("code",[t._v("includes")]),t._v(" 方法模拟实现: "),e("code",[t._v("[1, 2, 3].includes(...)")]),t._v("。")]),t._v(" "),e("blockquote",[e("p",[t._v("runtime 是相对于语法类转译的状态而言的，指的是转译产物在宿主环境运行时的状态。")])]),t._v(" "),e("p",[t._v('本章将介绍 Babel 针对转译产物的"运行时（runtime）"所做的工作。')]),t._v(" "),e("h2",{attrs:{id:"_8-1-补丁类工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-补丁类工具"}},[t._v("#")]),t._v(" 8.1 补丁类工具")]),t._v(" "),e("h3",{attrs:{id:"_8-1-1-核心工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-1-核心工具"}},[t._v("#")]),t._v(" 8.1.1 核心工具")]),t._v(" "),e("p",[t._v('Babel为源码"打补丁"的时候，用到了多种工具，这里做下介绍。')]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("core-js")])]),t._v(" "),e("p",[e("code",[t._v("core-js")]),t._v(" 提供了对 ECMAScript 标准、ECMAScript 提案、WEB 部分标准 API 等方面，对于目标宿主环境的补丁实现。")]),t._v(" "),e("p",[t._v("对其常见的一个用法是兼容低版本浏览器，比如 "),e("code",[t._v("Promise")]),t._v(" 在部分低的版本浏览器下是不支持的（如IE 6-10），"),e("code",[t._v("core-js")]),t._v(" 提供了 "),e("code",[t._v("Promise")]),t._v(" 对象的模拟实现。")]),t._v(" "),e("p",[t._v("随着 ECMAScript、WEB 标准的不断发展，"),e("code",[t._v("core-js")]),t._v(" 也在不断迭代，截至本书编写时，"),e("code",[t._v("core-js")]),t._v(" 主要有两个版本系列: "),e("code",[t._v("core-js@2")]),t._v("、"),e("code",[t._v("core-js@3")]),t._v("。")]),t._v(" "),e("p",[t._v("本章有专门的一节介绍 "),e("code",[t._v("core-js")]),t._v("。")])]),t._v(" "),e("li",[e("p",[t._v("babel-preset-env")]),t._v(" "),e("p",[t._v("babel-preset-env 会同时提供语法部分和补丁类的转译功能。值得注意的是，babel-preset-env 提供的高级 API 的补丁，是通过引入全局变量的形式实现的，因此可能会污染全局变量。")]),t._v(" "),e("p",[t._v("babel-preset-env 的配置项有很多，和补丁类相关的主要是: "),e("code",[t._v("useBuiltIns")]),t._v("和"),e("code",[t._v("corejs")]),t._v("。")]),t._v(" "),e("p",[t._v("比如，待转译的源码 "),e("code",[t._v("Promise")]),t._v("，通过 babel-preset-env 转译时，相应配置项的含义如下:")]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("useBuiltIns")])]),t._v(" "),e("p",[t._v("该配置描述了是否自动引入 "),e("code",[t._v("core-js")]),t._v("、用哪种方式引入 "),e("code",[t._v("core-js")]),t._v("，它有几种值:")]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("false")])]),t._v(" "),e("p",[t._v("不会自动引入 "),e("code",[t._v("core-js")]),t._v("，这是默认值。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("entry")])]),t._v(" "),e("p",[t._v("需要在源码入口文件中手动引入 "),e("code",[t._v("core-js")]),t._v("，且只能引入一次。")]),t._v(" "),e("p",[t._v("比如:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nPromise"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("p",[t._v("没什么变化，这是因为源码中没有引入 "),e("code",[t._v("core-js")]),t._v("。")]),t._v(" "),e("p",[t._v("源码调整为:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'core-js'")]),t._v("\nPromise\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[t._v("转译结果为:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"core-js/modules/es6.array.copy-within.js"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 全量的 core-js 子包")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"core-js/modules/web.dom.iterable.js"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nPromise"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br")])]),e("p",[t._v("可以看到，转译结果有以下特点:")]),t._v(" "),e("ul",[e("li",[t._v("引入的 "),e("code",[t._v("Promise")]),t._v(" 补丁污染了全局变量")]),t._v(" "),e("li",[t._v("补丁是全量引入的")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("usage")])]),t._v(" "),e("p",[t._v("会自动在转译后代码中按需引入 "),e("code",[t._v("core-js")]),t._v(" 的子包。")]),t._v(" "),e("p",[t._v("比如转译如下代码时:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("Promise\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("转译结果是:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"core-js/modules/es6.object.to-string.js"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 影响全局变量 Promise")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"core-js/modules/es6.promise.js"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nPromise"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])]),e("p",[t._v("可以看到，转译结果有以下特点:")]),t._v(" "),e("ul",[e("li",[t._v("引入的补丁污染了全局变量")]),t._v(" "),e("li",[t._v("补丁是按需引入的")])]),t._v(" "),e("p",[t._v("如果目标环境需要引入的话，转译时会自动引入对 "),e("code",[t._v("Promise")]),t._v(" 的 API 补丁。")])])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("corejs: string | { version: string, proposals: boolean }")])]),t._v(" "),e("p",[e("code",[t._v("corejs")]),t._v(" 配置项对应 "),e("code",[t._v("core-js")]),t._v(" 工具包，该工具提供了高版本API的兼容性实现。默认 "),e("code",[t._v("2")]),t._v("（随着发展，默认值可能调整为 "),e("code",[t._v("3")]),t._v("）。")]),t._v(" "),e("p",[t._v("注意，只有在 babel-preset-env 的 "),e("code",[t._v("useBuiltIns")]),t._v(" 配置项的值为 "),e("code",[t._v("usage | entry")]),t._v(" 的情况下，"),e("code",[t._v("corejs")]),t._v(" 的配置才会生效。")]),t._v(" "),e("p",[e("code",[t._v("corejs")]),t._v(" 配置的特点如下:")]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("corejs")]),t._v(" 可以设置精确的版本号")]),t._v(" "),e("p",[t._v("如 "),e("code",[t._v('corejs: "3.8"')]),t._v("。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("corejs")]),t._v(" 可配置是否支持提案API")]),t._v(" "),e("p",[t._v("比如目标源码是:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 截稿时，globalThis 是提案阶段 API")]),t._v("\nglobalThis\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[t._v("当 babel-preset-env 的配置项如下（不开启对提案 API 的补丁支持），:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useBuiltIns")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'usage'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("corejs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("version")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("proposals")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br")])]),e("p",[t._v("转译结果是:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nglobalThis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("p",[t._v("如果开启对提案 API 的补丁支持（配置 "),e("code",[t._v("proposals: true")]),t._v("），转译结果是:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"core-js/modules/esnext.global-this.js"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nglobalThis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])])])])])])]),t._v(" "),e("li",[e("p",[t._v("babel-plugin-polyfill-corejs2/3")]),t._v(" "),e("p",[t._v("TODO")])]),t._v(" "),e("li",[e("p",[t._v("babel-plugin-transform-runtime")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("作用1: 为转译过程中的辅助函数提供可复用的模块，以提高代码复用性")]),t._v(" "),e("p",[t._v("babel-plugin-transform-runtime 将语法转换过程中产生的辅助函数，从硬编码的形式，改为模块引入的形式，避免重复代码。")]),t._v(" "),e("p",[t._v("比如，源码:")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Base")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// class 为语法部分")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("不同配置下的转译结果不同。")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("不配置 babel-plugin-transform-runtime")]),t._v(" "),e("p",[t._v("Babel配置:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("presets")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/preset-env'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [ '@babel/plugin-transform-runtime' ]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])]),e("p",[t._v("转译结果是:")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("_classCallCheck")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("instance"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Constructor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Constructor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TypeError")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Cannot call a class as a function"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Base")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Base")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("_classCallCheck")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Base"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br")])])]),t._v(" "),e("li",[e("p",[t._v("配置 babel-plugin-transform-runtime")]),t._v(" "),e("p",[t._v("Babel配置:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("presets")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/preset-env'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/plugin-transform-runtime'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])]),e("p",[t._v("转译结果是:")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _classCallCheck "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("_interopRequireDefault")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/runtime/helpers/classCallCheck"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Base")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Base")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _classCallCheck"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Base"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("p",[e("code",[t._v("_classCallCheck")]),t._v(" 方法被以第三方模块引入的方式定义，避免出现重复的函数定义。")]),t._v(" "),e("p",[t._v("另外可以看到，"),e("code",[t._v("_classCallCheck")]),t._v(" 引用自 "),e("code",[t._v("babel-runtime")]),t._v("，哪些工具可以提供这些辅助函数，可以在 babel-plugin-transform-runtime 的配置项 "),e("code",[t._v("corejs")]),t._v(" 设置。")])])])]),t._v(" "),e("li",[e("p",[t._v("作用2: 将 API 补丁以局部变量的形式引入到转译产物，避免污染全局对象")]),t._v(" "),e("p",[t._v("比如，源码:")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("Promise\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("Babel 未配置 babel-plugin-transform-runtime时:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("presets")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/preset-env'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useBuiltIns")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'usage'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("p",[t._v("转译结果:")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"core-js/modules/es.promise"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 会影响全局变量 Promise")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[t._v("Babel 配置 babel-plugin-transform-runtime时:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("presets")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/preset-env'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useBuiltIns")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'usage'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/plugin-transform-runtime'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("corejs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])]),e("p",[t._v("转译结果是:")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _promise "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("_interopRequireDefault")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/runtime-corejs3/core-js-stable/promise"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 局部变量")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("_promise")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[t._v("可以看到，babel-plugin-transform-runtime 会将补丁以局部变量的形式提供给转译结果。")])]),t._v(" "),e("li",[e("p",[t._v("babel-plugin-transform-runtime 配置")]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("corejs: false | 2 | 3 | { version: 2 | 3, proposals: boolean }")])]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("false")])]),t._v(" "),e("p",[t._v("不配置 core-js 版本，直接使用 "),e("code",[t._v("babel-runtime")]),t._v(" 包提供的辅助函数。")]),t._v(" "),e("p",[t._v("该配置项需要项目增加对 "),e("code",[t._v("babel-runtime")]),t._v(" 包的依赖。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("2")])]),t._v(" "),e("p",[t._v("使用 "),e("code",[t._v("babel-runtime-core2")]),t._v(" 包提供的辅助函数。")]),t._v(" "),e("p",[e("code",[t._v("corejs: 2")]),t._v(" 仅支持全局变量（如 "),e("code",[t._v("Promise")]),t._v("）和静态属性（如 "),e("code",[t._v("Array.from")]),t._v("）。")]),t._v(" "),e("p",[t._v("该配置项需要项目引入依赖 "),e("code",[t._v("babel-runtime-corejs2")]),t._v(" 包。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("3")])]),t._v(" "),e("p",[t._v("使用 "),e("code",[t._v("babel-runtime-core3")]),t._v(" 提供的辅助函数。")]),t._v(" "),e("p",[e("code",[t._v("corejs: 3")]),t._v(" 除了支持全局变量（如 "),e("code",[t._v("Promise")]),t._v("）和静态属性（如 "),e("code",[t._v("Array.from")]),t._v("），也支持实例的属性（如 "),e("code",[t._v("[].includes")]),t._v("）。")]),t._v(" "),e("p",[t._v("该配置项需要项目引入依赖 "),e("code",[t._v("babel-runtime-corejs3")]),t._v(" 包。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("{ version: 2 | 3, proposals: boolean }")])]),t._v(" "),e("p",[t._v("与 babel-preset-env 中关于 "),e("code",[t._v("corejs")]),t._v(" 的配置一致，描述是否提供提案 API 的补丁注入支持。")])])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("helpers: boolean")])]),t._v(" "),e("p",[t._v("表示 babel-plugin-transform-runtime 是否开启将硬编码形式的 helpers 函数，转为模块式的引入。默认是 "),e("code",[t._v("true")]),t._v("。")]),t._v(" "),e("p",[t._v("举例，目标源码是:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("Babel在如下配置时:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("presets")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/preset-env'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useBuiltIns")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'usage'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" \n            "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/plugin-transform-runtime'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("helpers")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 不开启模块化引入 helpers 的功能")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])]),e("p",[t._v("转译结果是:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这是硬编码定义的 helpers 函数")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("_classCallCheck")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("instance"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Constructor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Constructor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TypeError")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Cannot call a class as a function"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("A")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("_classCallCheck")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br")])]),e("p",[t._v("当设置 "),e("code",[t._v("helpers: true")]),t._v(" 时，转译结果是:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _interopRequireDefault "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/runtime/helpers/interopRequireDefault"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _classCallCheck2 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("_interopRequireDefault")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/runtime/helpers/classCallCheck"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("A")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _classCallCheck2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("default"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("useESModules: boolean")])]),t._v(" "),e("p",[t._v("是否引入 "),e("code",[t._v("esm")]),t._v(" 格式的 Babel helpers 函数，默认是 "),e("code",[t._v("false")]),t._v("，即默认不开启。")]),t._v(" "),e("p",[t._v("举例，目标源码是:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("Babel在如下配置时:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("presets")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/preset-env'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useBuiltIns")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'usage'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" \n            "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/plugin-transform-runtime'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("useESModules")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认值，不引入 esm 格式的 Babel helpers 函数")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])]),e("p",[t._v("转译结果是:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _interopRequireDefault "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/runtime/helpers/interopRequireDefault"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这是非 esm 格式的 helper 函数")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _classCallCheck2 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("_interopRequireDefault")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/runtime/helpers/classCallCheck"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("A")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _classCallCheck2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("default"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br")])]),e("p",[t._v("当设置 "),e("code",[t._v("useESModules: true")]),t._v(" 时，转译结果是:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _interopRequireDefault "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/runtime/helpers/interopRequireDefault"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这是 esm 格式的 helper 函数")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _classCallCheck2 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("_interopRequireDefault")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/runtime/helpers/esm/classCallCheck"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("A")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _classCallCheck2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("default"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("regenerator: boolean")])]),t._v(" "),e("p",[t._v("表示是否提供辅助方法用于转译 "),e("code",[t._v("generator")]),t._v(" 函数，默认是 "),e("code",[t._v("true")]),t._v("。")]),t._v(" "),e("p",[t._v("举个实际的例子就比较清楚了，待转译的源码:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("如果 Babel 配置是:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("presets")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/preset-env'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" \n            "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/plugin-transform-runtime'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("regenerator")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 提供辅助方法用于转译 generator 函数")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])]),e("p",[t._v("转译结果是:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _interopRequireDefault "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/runtime/helpers/interopRequireDefault"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 提供的辅助函数用于转译 generator 函数")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _regenerator "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("_interopRequireDefault")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/runtime/regenerator"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _marked "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*#__PURE__*/")]),t._v("_regenerator"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("default"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mark")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("run"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" _regenerator"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("default"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wrap")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("run$")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("_context")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_context"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prev "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _context"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("next"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"end"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" _context"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("stop")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _marked"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br")])]),e("p",[t._v("如果设置 "),e("code",[t._v("regeneraotr: false")]),t._v("，转译结果是:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _marked "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*#__PURE__*/")]),t._v("regeneratorRuntime"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mark")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("run"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" regeneratorRuntime"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wrap")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("run$")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("_context")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_context"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prev "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _context"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("next"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"end"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" _context"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("stop")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _marked"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br")])]),e("p",[t._v("可以看到，"),e("code",[t._v("regeneraotr: false")]),t._v(" 时，转译结果代码依赖一个全局对象 "),e("code",[t._v("regeneratorRuntime")]),t._v("，从安全性上说，对全局变量的依赖是不稳定的。")])])])])])])]),t._v(" "),e("h3",{attrs:{id:"_8-1-2-案例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-2-案例"}},[t._v("#")]),t._v(" 8.1.2 案例")]),t._v(" "),e("p",[t._v("接下来以案例解释上述工具在Babel转译过程的作用。")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("准备工作")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("待转译的源文件为 index.js")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Base")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[t._v("这段源码包含了语法和 API 部分:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("class")]),t._v(" 为语法部分")]),t._v(" "),e("li",[e("code",[t._v("Promise")]),t._v(" 为API部分")])])]),t._v(" "),e("li",[e("p",[t._v("配置文件使用 "),e("code",[t._v(".babelrc")])])]),t._v(" "),e("li",[e("p",[t._v("转译产物文件为 "),e("code",[t._v("index-compiled.js")])])]),t._v(" "),e("li",[e("p",[t._v("使用命令行")]),t._v(" "),e("p",[t._v("我们希望这段源码转为 ES5 版本，该怎么做呢？假设，用 Babel 命令行执行转译，通过 "),e("code",[t._v(".babelrc")]),t._v("配置 Babel，转译产物文件为 index-compiled.js。")]),t._v(" "),e("blockquote",[e("p",[t._v("npx babel index.js --config-file ./.babelrc --out-file index-compiled.js")]),t._v(" "),e("p",[t._v("安装 node 或 npm 后，可直接使用 npx 唤起各类命令行执行")])])])])]),t._v(" "),e("li",[e("p",[t._v("不同配置的效果")]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v(".babelrc")]),t._v(" 空配置")]),t._v(" "),e("p",[t._v("转译后，"),e("code",[t._v("index-compiled.js")]),t._v(" 的内容依然是源码的样子:")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Base")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])])]),t._v(" "),e("li",[e("p",[t._v("使用 babel-preset-env 转译语法部分")]),t._v(" "),e("p",[t._v("配置 "),e("code",[t._v(".babelrc")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"presets"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-env"')]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br")])]),e("p",[t._v("执行转译后，"),e("code",[t._v("index-compiled.js")]),t._v(" 的内容为:")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("_classCallCheck")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("instance"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Constructor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Constructor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TypeError")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Cannot call a class as a function"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Base")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Base")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("_classCallCheck")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Base"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br")])]),e("p",[t._v("转译产物有以下特点:")]),t._v(" "),e("ul",[e("li",[t._v("新增指令: "),e("code",[t._v('"use strict"')])]),t._v(" "),e("li",[t._v("语法转译: "),e("code",[t._v("Class")]),t._v(" 转为了普通函数")]),t._v(" "),e("li",[t._v("新增辅助函数: 新引入了工具方法 "),e("code",[t._v("_classCallCheck")]),t._v("，用于校验构造函数被调用的方式")]),t._v(" "),e("li",[t._v("未引入API补丁: "),e("code",[t._v("Promise")]),t._v(" 作为API，没有引入补丁")])]),t._v(" "),e("p",[t._v("总结一下，只配置了 "),e("code",[t._v("babel-preset-env")]),t._v(" 的情况下，语法部分被转译了，API 部分没有引入补丁，对于低版本运行环境可能有兼容性问题。")])]),t._v(" "),e("li",[e("p",[t._v("使用babel-preset-env 的 "),e("code",[t._v('useBuiltIns: "entry"')]),t._v(" 配置引入全量、全局的 API 补丁")]),t._v(" "),e("p",[t._v("接下来修改 "),e("code",[t._v(".babelrc")]),t._v(" 配置:")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"presets"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-env"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"useBuiltIns"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"entry"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"corejs"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])]),e("p",[t._v("如上配置，"),e("code",[t._v("useBuiltIns")]),t._v(" 为 "),e("code",[t._v("entry")]),t._v(" 时，需要手动在源码添加 "),e("code",[t._v("import 'core-js'")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'core-js'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Base")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("p",[t._v("转译产物为:")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"core-js/modules/es.symbol"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"core-js/modules/es.promise"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"core-js/modules/es.promise.finally"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("_classCallCheck")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Base")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Base")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("_classCallCheck")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Base"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br")])]),e("p",[t._v("可以看到，相对源码，转译产物特点如下:")]),t._v(" "),e("ul",[e("li",[t._v("全局、全量引入了 "),e("code",[t._v("core-js")]),t._v(" 提供的各类API实现")]),t._v(" "),e("li",[t._v("其他特点和仅配置了 "),e("code",[t._v("babel-preset-env")]),t._v(" 的情况一致\n"),e("ul",[e("li",[t._v("新增指令: "),e("code",[t._v('"use strict"')])]),t._v(" "),e("li",[t._v("语法转译: "),e("code",[t._v("Class")]),t._v(" 转为了普通函数")]),t._v(" "),e("li",[t._v("新增辅助函数: 引入了工具方法 "),e("code",[t._v("_classCallCheck")]),t._v("，校验构造函数被调用的方式")])])])])]),t._v(" "),e("li",[e("p",[t._v("使用 babel-preset-env 的 "),e("code",[t._v('useBuiltIns: "usage"')]),t._v(" 配置引入按需、全局的 API 补丁")]),t._v(" "),e("p",[t._v("上面的例子中，"),e("code",[t._v('"useBuiltIns": "entry"')]),t._v(" 的方式缺点很明显:")]),t._v(" "),e("ul",[e("li",[t._v("全局引入了 API 实现")]),t._v(" "),e("li",[t._v("全量引入了 API 实现，而源码中仅仅需要的是 "),e("code",[t._v("Promise")]),t._v(" 的实现")])]),t._v(" "),e("p",[t._v("我们先解决第二个问题，改全量为按需，这需要设置 babel-preset-env 的 "),e("code",[t._v("useBuiltIns")]),t._v(" 配置项为 "),e("code",[t._v("usage")]),t._v("。")]),t._v(" "),e("p",[t._v("修改 "),e("code",[t._v(".babelrc")]),t._v(" 配置:")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"presets"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-env"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"useBuiltIns"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"usage"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"corejs"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])]),e("p",[t._v("对了，源码中不再需要手动引入 "),e("code",[t._v("core-js")]),t._v(" 了，恢复一下:")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Base")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[t._v("转译后的代码:")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"core-js/modules/es.object.to-string"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"core-js/modules/es.promise"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("_classCallCheck")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("instance"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Constructor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Base")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Base")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("_classCallCheck")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Base"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br")])]),e("p",[t._v("转译后的代码特点:")]),t._v(" "),e("ul",[e("li",[t._v("按需引入了全局的 Promise 实现")]),t._v(" "),e("li",[t._v("其他特点和仅配置了 "),e("code",[t._v("babel-preset-env")]),t._v(" 的情况一致\n"),e("ul",[e("li",[t._v("新增指令: "),e("code",[t._v('"use strict"')])]),t._v(" "),e("li",[t._v("语法转译: "),e("code",[t._v("Class")]),t._v(" 转为了普通函数")]),t._v(" "),e("li",[t._v("新增辅助函数: 引入了工具方法 "),e("code",[t._v("_classCallCheck")]),t._v("，校验构造函数被调用的方式")])])])])]),t._v(" "),e("li",[e("p",[t._v("使用 babel-plugin-transform-runtime 实现按需、局部变量形式引入 API 补丁")]),t._v(" "),e("p",[t._v("上面的配置中，仍然有一个问题没有解决: "),e("code",[t._v("Promise")]),t._v(" 的 API 实现仍然是全局引入的。")]),t._v(" "),e("p",[t._v("引入全局的 "),e("code",[t._v("Promise")]),t._v(" 实现，一般而言没什么问题，但对于工具库等场景的开发而言，污染全局变量会引起不可预知的问题，需要将 "),e("code",[t._v("Promise")]),t._v(" 的兼容性实现改为局部变量。")]),t._v(" "),e("p",[t._v("而 babel-preset-env 的 "),e("code",[t._v('"useBuiltIns"')]),t._v(" 配置关注的是如何将 API 的实现以"),e("strong",[t._v("全局")]),t._v("变量的形式引入转译产物。在此，需要使用 "),e("code",[t._v("babel-plugin-transform-runtime")]),t._v(" 引入局部的 Promise 实现。并且，"),e("code",[t._v("babel-plugin-transform-runtime")]),t._v(" 与 "),e("code",[t._v("babel-preset-env")]),t._v(" 的 "),e("code",[t._v("useBuiltIns")]),t._v(" 配置是互斥的，只能选一个配置。")]),t._v(" "),e("p",[t._v("修改 "),e("code",[t._v(".babelrc")]),t._v(" 配置:")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"presets"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-env"')]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"plugins"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/plugin-transform-runtime"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"corejs"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br")])]),e("p",[t._v("转译产物为:")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _interopRequireDefault "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/runtime-corejs3/helpers/interopRequireDefault"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _promise "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("_interopRequireDefault")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/runtime-corejs3/core-js-stable/promise"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _classCallCheck2 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("_interopRequireDefault")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/runtime-corejs3/helpers/classCallCheck"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Base")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Base")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _classCallCheck2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Base"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("_promise")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br")])]),e("p",[t._v("终于，我们看到:")]),t._v(" "),e("ul",[e("li",[t._v("Promise的API实现被以局部变量的形式引入")]),t._v(" "),e("li",[e("code",[t._v("_classCallCheck")]),t._v(" 和 "),e("code",[t._v("Promise")]),t._v(" 的实现均以 "),e("code",[t._v("require")]),t._v(" 的形式引入，而不是硬编码")]),t._v(" "),e("li",[e("code",[t._v("_classCallCheck")]),t._v(" 和 "),e("code",[t._v("Promise")]),t._v(" 的实现由 "),e("code",[t._v("babel-runtime-corejs3")]),t._v(" 提供，不再是 "),e("code",[t._v("babel-runtime")]),t._v(" 的 helpers 提供")])])]),t._v(" "),e("li",[e("p",[t._v("使用 babel-plugin-transform-runtime 除去重复的辅助代码")]),t._v(" "),e("p",[t._v("细心的同学可能注意到，上例中，引入 "),e("code",[t._v("babel-plugin-transform-runtime")]),t._v(" 后，"),e("code",[t._v("_classCallCheck")]),t._v(" 这类工具方法被以第三方引用的方式定义，而非原来的硬编码。")]),t._v(" "),e("p",[e("code",[t._v("babel-plugin-transform-runtime")]),t._v(" 确实可以解决辅助工具方法被硬编码带来的重复编码问题。")]),t._v(" "),e("p",[t._v("如果 "),e("code",[t._v(".babelrc")]),t._v(" 配置为:")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"presets"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-env"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"useBuiltIns"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"usage"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"corejs"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"plugins"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/plugin-transform-runtime"')]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br")])]),e("p",[t._v("那么，转译产物为:")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _interopRequireDefault "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/runtime/helpers/interopRequireDefault"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"core-js/modules/es6.promise"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"core-js/modules/es6.object.to-string"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _classCallCheck2 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("_interopRequireDefault")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/runtime/helpers/classCallCheck"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Base")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Base")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _classCallCheck2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Base"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br")])]),e("p",[t._v("可以看到，"),e("code",[t._v("_classCallCheck")]),t._v(" 通过 "),e("code",[t._v("require")]),t._v(" 的方式引入，而不再是硬编码的方式。")])])])])]),t._v(" "),e("h3",{attrs:{id:"_8-1-3-总结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-3-总结"}},[t._v("#")]),t._v(" 8.1.3 总结")]),t._v(" "),e("p",[t._v("总结一下，前面通过配置解决了上文中描述过的几个问题:")]),t._v(" "),e("ul",[e("li",[t._v("辅助方法如 "),e("code",[t._v("_classCallCheck")]),t._v(" 被以硬编码的形式引入转译产物")]),t._v(" "),e("li",[t._v("API 没有被转译")]),t._v(" "),e("li",[t._v("API 被以全局引入补丁的方式转译")])]),t._v(" "),e("p",[t._v("这里是关于配置的简单总结（伪代码）:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("配置组合")]),t._v(" "),e("th",[t._v("语法部分")]),t._v(" "),e("th",[t._v("API补丁是否引入")]),t._v(" "),e("th",[t._v("API补丁副作用")]),t._v(" "),e("th",[t._v("辅助函数引入方式")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("[babel-preset-env]")])]),t._v(" "),e("td",[t._v("执行转译")]),t._v(" "),e("td",[t._v("无")]),t._v(" "),e("td",[t._v("无")]),t._v(" "),e("td",[t._v("硬编码")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("[babel-preset-env, { useBuiltIns: entry, corejs: 2/3 }]")])]),t._v(" "),e("td",[t._v("执行转译")]),t._v(" "),e("td",[t._v("全量、需源码中手动引入"),e("code",[t._v("core-js")])]),t._v(" "),e("td",[t._v("污染全局对象、原型链")]),t._v(" "),e("td",[t._v("硬编码")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("[babel-preset-env, { useBuiltIns: usage, corejs: 2/3 }]")])]),t._v(" "),e("td",[t._v("执行转译")]),t._v(" "),e("td",[t._v("按需、自动引入"),e("code",[t._v("core-js")])]),t._v(" "),e("td",[t._v("污染全局对象、原型链")]),t._v(" "),e("td",[t._v("硬编码")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("[babel-preset-env] + [babel-plugin-transform-runtime]")])]),t._v(" "),e("td",[t._v("执行转译")]),t._v(" "),e("td",[t._v("无")]),t._v(" "),e("td",[t._v("无")]),t._v(" "),e("td",[t._v("外部引用")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("[babel-preset-env] + [babel-plugin-transform-runtime, { corejs: 2/3 }]")])]),t._v(" "),e("td",[t._v("执行转译")]),t._v(" "),e("td",[t._v("按需、自动引入"),e("code",[t._v("core-js")])]),t._v(" "),e("td",[t._v("不污染全局对象、原型链（API以局部变量引入）")]),t._v(" "),e("td",[t._v("外部引用")])])])]),t._v(" "),e("p",[t._v("这样，就能根据需求灵活调整配置。")]),t._v(" "),e("h3",{attrs:{id:"_8-2-1-简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-1-简介"}},[t._v("#")]),t._v(" 8.2.1 简介")]),t._v(" "),e("p",[e("code",[t._v("core-js")]),t._v(" 是 JavaScript 标准库 API 的补丁集，现在，它已支持 ECMAScript 的部分提案 API、标准 API，同时也支持部分 WEB 标准。")]),t._v(" "),e("p",[t._v("比如，对于 "),e("code",[t._v("Array.isArray()")]),t._v(" 方法，"),e("code",[t._v("core-js")]),t._v(" 提供了补丁:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" toString "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("toString"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("classof")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("it")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("it"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nArray"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isArray "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Array"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isArray "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("isArray")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("arg")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("classof")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Array'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br")])]),e("p",[e("code",[t._v("core-js")]),t._v(" 最初是作者为了满足自身项目需要开启的项目，提供一些补丁和工具函数，随后发布在社区，并越来越向标准化靠近，到现在，"),e("code",[t._v("core-js")]),t._v(" 可以被认为是一个纯粹的标准库补丁集。")]),t._v(" "),e("p",[e("code",[t._v("core-js")]),t._v(" 通常应用内置在 Babel 插件体系里，开发者以前较少用到，但它已经是前端开发的一个基础设施了。")]),t._v(" "),e("h3",{attrs:{id:"_8-2-2-core-js-2与core-js-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-2-core-js-2与core-js-3"}},[t._v("#")]),t._v(" 8.2.2 core-js@2与core-js@3")]),t._v(" "),e("p",[t._v("截至 2021 年 2 月，"),e("code",[t._v("core-js")]),t._v(" 广泛应用的有两个版本: "),e("code",[t._v("core-js@2")]),t._v(" 和 "),e("code",[t._v("core-js@3")]),t._v("，其中 "),e("code",[t._v("core-js@2")]),t._v(" 已经停止更新，建议使用 "),e("code",[t._v("core-js@3")]),t._v(" 版本。")]),t._v(" "),e("blockquote",[e("p",[t._v("本身编写时，能看到 core-js@4 的一些注释了，也许本书出版的时候 core-js@4 已经发布")])]),t._v(" "),e("p",[t._v("下表是 "),e("code",[t._v("core-js@2")]),t._v(" 与 "),e("code",[t._v("core-js@3")]),t._v(" 的部分区别:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th"),t._v(" "),e("th",[e("code",[t._v("core-js@2")])]),t._v(" "),e("th",[e("code",[t._v("core-js@3")])])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("是否更新")]),t._v(" "),e("td",[t._v("不再更新")]),t._v(" "),e("td",[t._v("更新中")])]),t._v(" "),e("tr",[e("td",[t._v("性能")]),t._v(" "),e("td",[t._v("包体积较大（~2M）")]),t._v(" "),e("td",[t._v("包进行了拆分: core-js/core-js-pure/core-js-compat")])]),t._v(" "),e("tr",[e("td",[t._v("特性支持")]),t._v(" "),e("td"),t._v(" "),e("td",[t._v("在 @2 的基础上，删除一些过时特性"),e("br"),t._v("在 @2 的基础上，新增对 web 标准的支持")])])])]),t._v(" "),e("p",[t._v("在此，我们主要了解 "),e("code",[t._v("core-js@3")]),t._v(" 版本的使用和原理，下文中如不特殊标注版本，均被认为是 "),e("code",[t._v("core-js@3")]),t._v("。其与 "),e("code",[t._v("core-js@2")]),t._v(" 的差异，书中也会介绍。")]),t._v(" "),e("p",[e("code",[t._v("core-js@3")]),t._v(" 的特点:")]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("core-js")]),t._v(" 支持最新的 ECMAScript 标准")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("core-js")]),t._v(" 支持 ECMAScript 标准库提案")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("core-js")]),t._v(" 支持一些 WHATWG/W3C 标准")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("core-js")]),t._v(" 最大限度提供模块化定义，使之可按需使用")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("core-js")]),t._v(" 支持污染和不污染全局变量的能力")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("core-js")]),t._v(" 和 Babel 紧密集成，便于项目使用")])])]),t._v(" "),e("h3",{attrs:{id:"_8-2-3-core-js-3-子模块分类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-3-core-js-3-子模块分类"}},[t._v("#")]),t._v(" 8.2.3 "),e("code",[t._v("core-js@3")]),t._v(" 子模块分类")]),t._v(" "),e("p",[e("code",[t._v("core-js@3")]),t._v(" 是 monorepo 项目，基于 lerna 进行模块管理，其核心 package 包括:")]),t._v(" "),e("ol",[e("li",[e("code",[t._v("core-js/packages/core-js/")])]),t._v(" "),e("li",[e("code",[t._v("core-js/packages/core-js-builder/")])]),t._v(" "),e("li",[e("code",[t._v("core-js/packages/core-js-bundle/")])]),t._v(" "),e("li",[e("code",[t._v("core-js/packages/core-js-compat/")])]),t._v(" "),e("li",[e("code",[t._v("core-js/packages/core-js-pure/")])])]),t._v(" "),e("p",[t._v("接下来将介绍上述模块。")]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("core-js/packages/core-js/")])]),t._v(" "),e("p",[t._v("定义全局的补丁（~500KB，压缩并且 gzipped 处理后 40KB）。")]),t._v(" "),e("p",[t._v("core-js 支持 ECMAScript 标准、ECMAScript 提案、一些 WEB 标准（WHATWG/W3C），也支持模块化。这些特点的实现，主要在 "),e("code",[t._v("core-js/packages/core-js/")]),t._v(" 目录里。源码中有以下约定:")]),t._v(" "),e("ul",[e("li",[t._v("ECMAScript 标准中的 API，以 "),e("code",[t._v("es.xx.js")]),t._v(" 命名，如 "),e("code",[t._v("es.array.every.js")])]),t._v(" "),e("li",[t._v("ECMAScript 提案中的 API，以 "),e("code",[t._v("esnext.xx.js")]),t._v(" 命名，如 "),e("code",[t._v("esnext.map.of.js")])]),t._v(" "),e("li",[t._v("WEB 标准中的 API，以 "),e("code",[t._v("web.xx.js")]),t._v(" 命名，如 "),e("code",[t._v("web.url-search-params.js")])])]),t._v(" "),e("p",[t._v("下表是 "),e("code",[t._v("core-js/packages/core-js")]),t._v(" 各子模块的功能以及对各个标准的支持情况:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("目录/文件")]),t._v(" "),e("th",[t._v("描述")]),t._v(" "),e("th",[t._v("支持ES标准")]),t._v(" "),e("th",[t._v("支持ES提案")]),t._v(" "),e("th",[t._v("支持WEB标准")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("packages/core-js/index.js")]),t._v(" "),e("td",[t._v("全部补丁，包括 ECMAScript 标准、ECMAScript 提案、WEB 标准")]),t._v(" "),e("td",[t._v("√")]),t._v(" "),e("td",[t._v("√")]),t._v(" "),e("td",[t._v("√")])]),t._v(" "),e("tr",[e("td",[t._v("packages/core-js/es/")]),t._v(" "),e("td",[t._v("进入 ECMAScript 标准的 API")]),t._v(" "),e("td",[t._v("√")]),t._v(" "),e("td",[t._v("√")]),t._v(" "),e("td",[t._v("×")])]),t._v(" "),e("tr",[e("td",[t._v("packages/core-js/features/")]),t._v(" "),e("td",[t._v("包含 "),e("code",[t._v("es/")]),t._v("、"),e("code",[t._v("web/")]),t._v("、"),e("code",[t._v("proposals/")]),t._v(" 目录下的所有 API")]),t._v(" "),e("td",[t._v("√")]),t._v(" "),e("td",[t._v("√")]),t._v(" "),e("td",[t._v("√ ?")])]),t._v(" "),e("tr",[e("td",[t._v("packages/core-js/stable/")]),t._v(" "),e("td",[t._v("稳定的 API，包括 ECMAScript 标准、WEB 标准")]),t._v(" "),e("td",[t._v("√")]),t._v(" "),e("td",[t._v("×")]),t._v(" "),e("td",[t._v("√")])]),t._v(" "),e("tr",[e("td",[t._v("packages/core-js/web/")]),t._v(" "),e("td",[t._v("WEB 标准 API")]),t._v(" "),e("td",[t._v("×")]),t._v(" "),e("td",[t._v("×")]),t._v(" "),e("td",[t._v("√")])]),t._v(" "),e("tr",[e("td",[t._v("packages/core-js/proposals/")]),t._v(" "),e("td",[e("code",[t._v("index.js")]),t._v(" 指向 "),e("code",[t._v("stage/")]),t._v(" 目录，间接指向 "),e("code",[t._v("stage-0/")]),t._v(" 目录。目录内其他文件均为试验阶段的 ES API")]),t._v(" "),e("td",[t._v("×")]),t._v(" "),e("td",[t._v("√")]),t._v(" "),e("td",[t._v("×")])]),t._v(" "),e("tr",[e("td",[t._v("packages/core-js/stage/")]),t._v(" "),e("td",[e("code",[t._v("index.js")]),t._v(" 指向 "),e("code",[t._v("stage-0/")]),t._v(" 目录，目录内其他文件分别指向 "),e("code",[t._v("stage0~4")])]),t._v(" "),e("td",[t._v("√")]),t._v(" "),e("td",[t._v("√")]),t._v(" "),e("td",[t._v("×")])]),t._v(" "),e("tr",[e("td",[t._v("packages/core-js/internals/")]),t._v(" "),e("td",[t._v("内部使用的工具函数，含 API 具体实现，不用于对外服务")]),t._v(" "),e("td",[t._v("√")]),t._v(" "),e("td",[t._v("√")]),t._v(" "),e("td",[t._v("√")])]),t._v(" "),e("tr",[e("td",[t._v("packages/core-js/modules/")]),t._v(" "),e("td",[t._v("提供 API 最终定义；文件命名与当前支持的阶段和标准相关。")]),t._v(" "),e("td",[t._v("√")]),t._v(" "),e("td",[t._v("√")]),t._v(" "),e("td",[t._v("√")])])])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("core-js/packages/core-js-pure")])]),t._v(" "),e("p",[t._v("提供了不污染全局变量的补丁，即模块化的使用。和 core-js@2 中的 "),e("code",[t._v("core-js/library")]),t._v(" 相当（~440KB）。")]),t._v(" "),e("p",[t._v("举例:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 局部变量")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" from "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'core-js-pure/stable/array/from'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" flat "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'core-js-pure/stable/array/flat'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Set "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'core-js-pure/stable/set'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Promise "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'core-js-pure/stable/promise'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("from")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Set")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("flat")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nPromise"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("x")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("core-js/packages/core-js-bundle")])]),t._v(" "),e("p",[e("code",[t._v("core-js-bundle")]),t._v(" 是一个完整的 "),e("code",[t._v("core-js")]),t._v(" 打包后的版本，提供全局补丁定义。")]),t._v(" "),e("p",[t._v("可以在浏览器环境使用:")]),t._v(" "),e("div",{staticClass:"language-html line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token doctype"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<!")]),e("span",{pre:!0,attrs:{class:"token doctype-tag"}},[t._v("DOCTYPE")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token name"}},[t._v("html")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("en"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UTF-8"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("http-equiv")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("X-UA-Compatible"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("IE=edge"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("viewport"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("width=device-width, initial-scale=1.0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Document"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://unpkg.com/core-js-bundle@3.16.2/minified.js"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token script"}}),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token script"}},[e("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n        console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("globalThis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Array "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" Array"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n    ")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br")])]),e("p",[t._v("也可以在 Node 环境使用:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'core-js-bundle'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("globalThis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Array "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" Array"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("core-js/packages/core-js-compat")])]),t._v(" "),e("p",[e("code",[t._v("core-js-compat")]),t._v(" 提供了目标环境对应的 "),e("code",[t._v("core-js")]),t._v(" 需要提供的功能模块。")])])]),t._v(" "),e("h3",{attrs:{id:"_8-2-3-core-js中的补丁"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-3-core-js中的补丁"}},[t._v("#")]),t._v(" 8.2.3 core-js中的补丁")]),t._v(" "),e("p",[t._v("这里介绍一下 "),e("code",[t._v("core-js")]),t._v(" 中某些 API 的补丁。")]),t._v(" "),e("h3",{attrs:{id:"准备工作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[t._v("#")]),t._v(" 准备工作")]),t._v(" "),e("p",[e("code",[t._v("core-js")]),t._v(" 内部提供了一个通用的工具方法（这里命名为 "),e("code",[t._v("$")]),t._v("），该方法定义在文件 "),e("code",[t._v("core-js/packages/core-js/internals/export.js")]),t._v("，类型定义如下。")]),t._v(" "),e("div",{staticClass:"language-ts line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-ts"}},[e("code",[t._v("module"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" object"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" source"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" object"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("该方法提供了一种快捷方式，将补丁实现快速应用在目标对象上。")]),t._v(" "),e("p",[t._v("比如，"),e("code",[t._v("core-js/packages/core-js/modules/es.object.is.js")]),t._v(" 定义了 "),e("code",[t._v("Object.is")]),t._v(" 方法的补丁，通用方法 "),e("code",[t._v("$")]),t._v(" 是这样为 "),e("code",[t._v("Object")]),t._v(" 对象添加 "),e("code",[t._v("is()")]),t._v(" 方法的:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" $ "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../internals/export'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通用的工具方法 $")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" is "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../internals/same-value'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// `Object.is` method")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://tc39.es/ecma262/#sec-object.is")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("target")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Object'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("stat")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("is")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" is\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])]),e("p",[e("code",[t._v("$")]),t._v(" 方法中，"),e("code",[t._v("options")]),t._v(" 对象是配置项，在该例中指的是 "),e("code",[t._v("{ target: 'Object', stat: true }")]),t._v("。"),e("code",[t._v("source")]),t._v(" 对象描述了补丁的具体实现，在该例中指的是 "),e("code",[t._v("{ is: is }")]),t._v("。")]),t._v(" "),e("p",[t._v("上述配置的目的是将 "),e("code",[t._v("is()")]),t._v(" 方法添加到 "),e("code",[t._v("Object")]),t._v(" 对象作为其静态方法: "),e("code",[t._v("Object.is()")]),t._v("。")]),t._v(" "),e("p",[t._v("以下是 "),e("code",[t._v("options")]),t._v(" 各配置项的含义:")]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("target: string | undefined")])]),t._v(" "),e("p",[t._v("描述 "),e("code",[t._v("source")]),t._v(" 中的属性名要添加到的目标对象。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("global: boolean")])]),t._v(" "),e("p",[e("code",[t._v("source")]),t._v(" 中的属性名要添加到的目标对象是否是全局对象。")]),t._v(" "),e("p",[t._v("以 "),e("code",[t._v("es.parse-float.js")]),t._v(" 为例:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" $ "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../internals/export'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" parseFloatImplementation "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../internals/number-parse-float'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// `parseFloat` method")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://tc39.es/ecma262/#sec-parsefloat-string")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("global")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("forced")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" parseFloat "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" parseFloatImplementation "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("parseFloat")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" parseFloatImplementation\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])]),e("p",[t._v("其配置的 "),e("code",[t._v("global: true")]),t._v(" 意味着，"),e("code",[t._v("parseFloat")]),t._v(" 会被添加到全局对象上。")]),t._v(" "),e("p",[t._v("以 "),e("code",[t._v("es.object.keys.js")]),t._v(" 为例:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// `Object.keys` method")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://tc39.es/ecma262/#sec-object.keys")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("target")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Object'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("stat")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("forced")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FAILS_ON_PRIMITIVES")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("keys")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("it")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("nativeKeys")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("toObject")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("it"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br")])]),e("p",[t._v("其没有配置 "),e("code",[t._v("global: true")]),t._v("，且配置的 "),e("code",[t._v("stat: true")]),t._v("，意味着，"),e("code",[t._v("keys()")]),t._v(" 方法被设置在了 "),e("code",[t._v("Object")]),t._v(" 对象上，构成了 "),e("code",[t._v("Object.keys()")]),t._v(" 方法。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("stat: boolean")])]),t._v(" "),e("p",[e("code",[t._v("source")]),t._v(" 对象中的属性名是否是 "),e("code",[t._v("target")]),t._v(" 的静态属性/方法。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("proto: boolean")])]),t._v(" "),e("p",[t._v("是否添加到 "),e("code",[t._v("target")]),t._v(" 描述的对象的 "),e("code",[t._v("prototype")]),t._v("上。")]),t._v(" "),e("p",[t._v("例如，"),e("code",[t._v("es.array.copy-within.js")]),t._v(" 的内容是:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// `Array.prototype.copyWithin` method")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://tc39.es/ecma262/#sec-array.prototype.copywithin")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("target")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Array'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("proto")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("copyWithin")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" copyWithin\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("p",[e("code",[t._v("copyWithin")]),t._v(" 方法被设置到了 "),e("code",[t._v("Array.prototype.copyWithin")]),t._v("。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("real")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("forced: boolean")])]),t._v(" "),e("p",[t._v("是否强制覆盖原生实现。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("bind")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("wrap")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("unsafe")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("sham")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("enumerable: boolean")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("noTargetGet: boolean")])])])]),t._v(" "),e("h3",{attrs:{id:"ecmascript标准的补丁"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript标准的补丁"}},[t._v("#")]),t._v(" ECMAScript标准的补丁")]),t._v(" "),e("p",[t._v("ECMAScript 标准涉及的特性比较多，笔者根据标准描述及 "),e("code",[t._v("core-js")]),t._v(" 的文档/源码，整理了 ECMAScript 标准特性及其在 "),e("code",[t._v("core-js")]),t._v(" 的实现路径。")]),t._v(" "),e("h4",{attrs:{id:"ecmascript-object"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-object"}},[t._v("#")]),t._v(" "),e("code",[t._v("ECMAScript: Object")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.assign")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/assign")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.is")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/is")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.set-prototype-of")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/set-prototype-of")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.get-prototype-of")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/get-prototype-of")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.get-own-property-descriptor")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/get-own-property-descriptor")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.get-own-property-descriptors")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/get-own-property-descriptors")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.keys")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/keys")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.values")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/values")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.entries")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/entries")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.get-own-property-names")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/get-own-property-names")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.freeze")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/freeze")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.from-entries")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/from-entries")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.seal")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/seal")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.prevent-extensions")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/prevent-extensions")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.is-frozen")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/is-frozen")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.is-sealed")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/is-sealed")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.is-extensible")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/is-extensible")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.to-string")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/object/to-string")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.create")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/create")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.define-property")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/define-property")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.define-properties")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/define-properties")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.define-getter")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/define-getter")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.define-setter")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/define-setter")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.lookup-getter")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/lookup-getter")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.object.lookup-setter")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/lookup-setter")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h4",{attrs:{id:"ecmascript-function"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-function"}},[t._v("#")]),t._v(" "),e("code",[t._v("ECMAScript: Function")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.function")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/function")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.function.name")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/function/name")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.function.has-instance")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/function/has-instance")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.function.bind")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/function/bind")]),e("br"),e("code",[t._v("core-js/es|stable|features/function/virtual/bind")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h4",{attrs:{id:"ecmascript-array"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-array"}},[t._v("#")]),t._v(" "),e("code",[t._v("ECMAScript: Array")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.from")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/from")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.is-array")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/is-array")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.of")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/of")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.copy-within")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/copy-within")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.fill")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/fill")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.find")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/find")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.find-index")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/find-index")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.iterator")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/iterator")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.includes")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/includes")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.slice")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/slice")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.join")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/join")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.index-of")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/index-of")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.last-index-of")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/last-index-of")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.every")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/virtual/every")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.some")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/virtual/some")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.for-each")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/for-each")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.map")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/map")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.filter")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/filter")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.reduce")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/reduce")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.reduce-right")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/reduce-right")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.reverse")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/reverse")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.sort")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/sort")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.flat")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/flat")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.flat-map")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/flat-map")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.unscopables.flat")])]),t._v(" "),e("td",[t._v("??")])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.unscopables.flat-map")])]),t._v(" "),e("td",[t._v("??")])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.at")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/at")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h4",{attrs:{id:"ecmascript-string-and-regexp"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-string-and-regexp"}},[t._v("#")]),t._v(" "),e("code",[t._v("ECMASCript: String and RegExp")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.from-code-point")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string/from-code-point")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.raw")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string/raw")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.iterator")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/iterator")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.split")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/string/split")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.code-point-at")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/code-point-at")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.ends-with")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/ends-with")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.includes")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/includes")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.repeat")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/repeat")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.pad-start")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/pad-start")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.pad-end")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/pad-end")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.starts-with")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/starts-with")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.trim")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/trim")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.trim-start")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/trim-start")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.trim-end")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/trim-end")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.match-all")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/match-all")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.replace-all")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/replace-all")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.at-alternative")])]),t._v(" "),e("td",[t._v("??")])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.match")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/string/match")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.replace")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/string/replace")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.search")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/string/search")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.split")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/string/split")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.anchor")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/anchor")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.big")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/big")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.blink")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/blink")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.bold")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/bold")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.fixed")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/fixed")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.fontcolor")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/fontcolor")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.fontsize")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/fontsize")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.italics")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)(/virtual)/italics")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.link")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/link")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.small")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/small")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.strike")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/strike")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.sub")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/sub")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.sup")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/sup")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.substr")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string(/virtual)/substr")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.escape")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/escape")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.unescape")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/unescape")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.regexp")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/regexp")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.regexp.constructor")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/regexp/constructor")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.regexp.dot-all")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/regexp/dot-all")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.regexp.flags")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/regexp/flags")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.regexp.sticky")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/regexp/sticky")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.regexp.test")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/regexp/test")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h4",{attrs:{id:"ecmascript-number"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-number"}},[t._v("#")]),t._v(" "),e("code",[t._v("ECMAScript: Number")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.number")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/number")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.number.constructor")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/number/constructor")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.number.epsilon")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/number/epsilon")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.number.is-finite")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/number/is-finite")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.number.is-integer")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/number/is-integer")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.number.is-nan")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/number/is-nan")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.number.is-safe-integer")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/number/is-safe-integer")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.number.max-safe-integer")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/number/max-safe-integer")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.number.min-safe-integer")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/number/min-safe-integer")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.number.parse-float")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/parse-float")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.number.parse-int")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/parse-int")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.number.to-fixed")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/number/to-fixed")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.number.to-precision")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/number/to-precision")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.parse-int")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/parse-int")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.parse-float")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/parse-float")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h4",{attrs:{id:"ecmascript-math"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-math"}},[t._v("#")]),t._v(" "),e("code",[t._v("ECMAScript: Math")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.math")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/math")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.math.acosh")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/math/acosh")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.math.asinh")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/math/asinh")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.math.atanh")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/math/atanh")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.math.cbrt")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/math/cbrt")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.math.clz32")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/math/clz32")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.math.cosh")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/math/cosh")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.math.expm1")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/math/expm1")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.math.fround")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/math/fround")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.math.hypot")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/math/hypot")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.math.imul")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/math/imul")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.math.log10")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/math/log10")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.math.log1p")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/math/log1p")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.math.log2")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/math/log2")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.math.sign")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/math/sign")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.math.sinh")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/math/sinh")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.math.tanh")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/math/tanh")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.math.trunc")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/math/trunc")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h4",{attrs:{id:"ecmascript-date"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-date"}},[t._v("#")]),t._v(" "),e("code",[t._v("ECMAScript: Date")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.date")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/date")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.date.to-string")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/date/to-string")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.date.now")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/date/now")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.date.to-iso-string")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/date/to-iso-string")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.date.to-json")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/date/to-json")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.date.to-primitive")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/date/to-primitive")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.date.get-year")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/date/get-year")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.date.set-year")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/date/set-year")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.date.to-gmt-string")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/date/to-gmt-string")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h4",{attrs:{id:"ecmascript-promise"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-promise"}},[t._v("#")]),t._v(" "),e("code",[t._v("ECMAScript: Promise")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.aggregate-error")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/aggregate-error")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.promise")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/promise")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.promise.all-settled")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/promise/all-settled")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.promise.any")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/promise/any")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.promise.finally")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/promise/finally")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h4",{attrs:{id:"ecmascript-symbol"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-symbol"}},[t._v("#")]),t._v(" "),e("code",[t._v("ECMAScript: Symbol")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.symbol")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/symbol")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.symbol.async-iterator")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/symbol/async-iterator")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.symbol.description")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/symbol/description")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.symbol.has-instance")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/symbol/has-instance")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.symbol.is-concat-spreadable")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/symbol/is-concat-spreadable")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.symbol.iterator")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/symbol/iterator")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.symbol.match")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/symbol/match")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.symbol.replace")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/symbol/replace")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.symbol.search")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/symbol/search")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.symbol.species")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/symbol/species")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.symbol.split")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/symbol/split")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.symbol.to-primitive")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/symbol/to-primitive")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.symbol.to-string-tag")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/symbol/to-string-tag")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.symbol.unscopables")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/symbol/unscopables")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/symbol/for")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/symbol/key-for")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/object/get-own-property-symbols")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h4",{attrs:{id:"ecmascript-collections"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-collections"}},[t._v("#")]),t._v(" "),e("code",[t._v("ECMAScript: Collections")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("Map")]),t._v(" "),e("td",[e("code",[t._v("es.map")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/map")])])]),t._v(" "),e("tr",[e("td",[t._v("Set")]),t._v(" "),e("td",[e("code",[t._v("es.set")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/set")])])]),t._v(" "),e("tr",[e("td",[t._v("WeakMap")]),t._v(" "),e("td",[e("code",[t._v("es.weak-map")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/weak-map")])])]),t._v(" "),e("tr",[e("td",[t._v("WeakSet")]),t._v(" "),e("td",[e("code",[t._v("es.weak-set")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/weak-set")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h4",{attrs:{id:"ecmascript-typed-arrays"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-typed-arrays"}},[t._v("#")]),t._v(" "),e("code",[t._v("ECMAScript: Typed Arrays")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array-buffer")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/array-buffer")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array-buffer.constructor")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/array-buffer/constructor")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array-buffer.is-view")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/array-buffer/is-view")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array-buffer.slice")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/array-buffer/slice")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.data-view")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/data-view")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.int8-array")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/int8-array")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.uint8-array")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/uint8-array")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.uint8-clamped-array")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/uint8-clamped-array")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.int16-array")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/int16-array")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.uint16-array")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/uint16-array")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.int32-array")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/int32-array")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.uint32-array")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/uint32-array")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.float32-array")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/float32-array")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.float64-array")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/float64-array")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.copy-within")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/copy-within")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.every")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/every")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.fill")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/fill")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.filter")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/filter")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.find")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/find")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.find-index")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/find-index")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.for-each")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/for-each")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.from")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/from")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.includes")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/includes")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.index-of")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/index-of")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.iterator")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/iterator")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.last-index-of")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/last-index-of")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.map")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/map")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.of")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/of")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.reduce")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/reduce")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.reduce-right")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/reduce-right")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.reverse")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/reverse")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.set")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/set")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.slice")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/slice")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.some")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/some")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.sort")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/sort")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.subarray")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/subarray")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.to-locale-string")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/to-locale-string")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.to-string")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/to-string")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.typed-array.at")])]),t._v(" "),e("td",[e("code",[t._v("core-js/es|stable|features/typed-array/at")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h4",{attrs:{id:"ecmascript-reflect"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-reflect"}},[t._v("#")]),t._v(" "),e("code",[t._v("ECMAScript: Reflect")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.reflect")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/reflect")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.reflect.apply")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/reflect/apply")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.reflect.construct")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/reflect/construct")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.reflect.define-property")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/reflect/define-property")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.reflect.delete-property")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/reflect/delete-property")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.reflect.get")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/reflect/get")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.reflect.get-own-property-descriptor")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/reflect/get-own-property-descriptor")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.reflect.get-prototype-of")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/reflect/get-prototype-of")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.reflect.has")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/reflect/has")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.reflect.is-extensible")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/reflect/is-extensible")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.reflect.own-keys")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/reflect/own-keys")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.reflect.prevent-extensions")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/reflect/prevent-extensions")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.reflect.set")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/reflect/set")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.reflect.set-prototype-of")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/reflect/set-prototype-of")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h4",{attrs:{id:"ecmascript-json"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-json"}},[t._v("#")]),t._v(" "),e("code",[t._v("ECMAScript: JSON")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特例列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.json.to-string-tag")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/json/to-string-tag")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.json.stringify")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/json/stringify")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h4",{attrs:{id:"ecmascript-globalthis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-globalthis"}},[t._v("#")]),t._v(" "),e("code",[t._v("ECMAScript: globalThis")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.global-this")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/global-this")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("文件 "),e("code",[t._v("core-js/packages/core-js/internals/global.js")]),t._v(" 定义了全局对象的实现，代码如下:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("check")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("it")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" it "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" it"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Math "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" Math "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" it"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028")]),t._v("\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// eslint-disable-next-line es/no-global-this -- safe")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("check")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" globalThis "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'object'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" globalThis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("check")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" window "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'object'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" window"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// eslint-disable-next-line no-restricted-globals -- safe")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("check")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" self "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'object'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" self"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("check")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" global "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'object'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" global"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// eslint-disable-next-line no-new-func -- fallback")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'return this'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br")])]),e("p",[t._v("可以看到，定义全局对象的过程有以下特点:")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("判断全局对象的先后顺序")]),t._v(" "),e("p",[t._v("依次是: "),e("code",[t._v("globalThis")]),t._v("、"),e("code",[t._v("window")]),t._v("、"),e("code",[t._v("self")]),t._v("、"),e("code",[t._v("global")]),t._v("、自定义方法获取。")])]),t._v(" "),e("li",[e("p",[t._v("自定义方法获取全局对象")]),t._v(" "),e("p",[t._v("用立即执行函数获取全局对象，优先使用 "),e("code",[t._v("(function () { return this; })()")]),t._v("，其次使用 "),e("code",[t._v("Function('return this')()")]),t._v("。")])]),t._v(" "),e("li",[e("p",[t._v("判断全局对象是否有效")]),t._v(" "),e("p",[e("code",[t._v("check")]),t._v(" 函数用于校验对象是否是有效的全局对象，判断该对象的 "),e("code",[t._v("Math")]),t._v(" 属性是否和全局的 "),e("code",[t._v("Math")]),t._v(" 变量一致。")])])])])]),t._v(" "),e("h3",{attrs:{id:"ecmascript提案的补丁"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript提案的补丁"}},[t._v("#")]),t._v(" ECMAScript提案的补丁")]),t._v(" "),e("h4",{attrs:{id:"stage-4-proposals"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#stage-4-proposals"}},[t._v("#")]),t._v(" "),e("code",[t._v("Stage 4 proposals")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("globalThis")])]),t._v(" "),e("td",[e("code",[t._v("es.global-this")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/global-this")]),e("br"),e("code",[t._v("core-js(-pure)/es|stable|features/global-this")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("String#matchAll")])]),t._v(" "),e("td",[e("code",[t._v("es.string.match-all")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/string-match-all")]),e("br"),e("code",[t._v("core-js/es|stable|features/string/match-all")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("String#replaceAll")])]),t._v(" "),e("td",[e("code",[t._v("es.string.replace-all")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/string-replace-all")]),e("br"),e("code",[t._v("core-js/es|stable|features/string/replace-all")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("Promise.allSettled")])]),t._v(" "),e("td",[e("code",[t._v("es.promise.all-settled")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/promise-all-settled")]),e("br"),e("code",[t._v("core-js(-pure)/es|stable|features/promise/all-settled")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("Promise.any")])]),t._v(" "),e("td",[e("code",[t._v("es.promise.any")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/promise-any")]),e("br"),e("code",[t._v("core-js(-pure)/es|stable|features/promise/any")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("Promise.any")])]),t._v(" "),e("td",[e("code",[t._v("es.aggregate-error")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/aggregate-error")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("Object.prototype.hasOwnProperty")])]),t._v(" "),e("td",[e("code",[t._v("es.object.has-own")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/accessible-object-hasownproperty")]),e("br"),e("code",[t._v("core-js(-pure)/es|stable|features/object/has-own")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.array.at")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("es.string.at-alternative")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("Relative indexing method")]),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/relative-indexing-method")])])]),t._v(" "),e("tr",[e("td",[t._v("Relative indexing method")]),t._v(" "),e("td",[e("code",[t._v("es.typed-array.at")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/array/at")])])]),t._v(" "),e("tr",[e("td",[t._v("Relative indexing method")]),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/string/at")])])]),t._v(" "),e("tr",[e("td",[t._v("Relative indexing method")]),t._v(" "),e("td",[e("code",[t._v("es.typed-array.at")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/es|stable|features/typed-array/at")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h4",{attrs:{id:"stage-3-proposals"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#stage-3-proposals"}},[t._v("#")]),t._v(" "),e("code",[t._v("Stage 3 proposals")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.array.find-last")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features(/virtual)/array/find-last")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.array.find-last-index")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features(/virtual)/array/find-last-index")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.typed-array.find-last")])]),t._v(" "),e("td",[e("code",[t._v("core-js/features/typed-array/find-last")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.typed-array.find-last-index")])]),t._v(" "),e("td",[e("code",[t._v("core-js/features/typed-array/find-last-index")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h4",{attrs:{id:"stage-2-proposals"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#stage-2-proposals"}},[t._v("#")]),t._v(" "),e("code",[t._v("Stage 2 proposals")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/iterator-helpers")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.async-iterator.constructor")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.async-iterator.as-indexed-pairs")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/async-iterator/as-indexed-pairs")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.async-iterator.drop")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/async-iterator/drop")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.async-iterator.every")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/async-iterator/every")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.async-iterator.filter")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/async-iterator/filter")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.async-iterator.find")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/async-iterator/find")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.async-iterator.flat-map")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/async-iterator/flat-map")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.async-iterator.for-each")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/async-iterator/for-each")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.async-iterator.from")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/async-iterator/from")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.async-iterator.map")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/async-iterator/map")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.async-iterator.reduce")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/async-iterator/reduce")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.async-iterator.some")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/async-iterator/some")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.async-iterator.take")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/async-iterator/take")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.async-iterator.to-array")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/async-iterator/to-array")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.iterator.constructor")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.iterator.as-indexed-pairs")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/iterator/as-indexed-pairs")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.iterator.drop")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/iterator/drop")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.iterator.every")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/iterator/every")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.iterator.filter")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/iterator/filter")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.iterator.find")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/iterator/find")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.iterator.flat-map")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/iterator/flat-map")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.iterator.for-each")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/iterator/for-each")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.iterator.from")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/iterator/from")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.iterator.map")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/iterator/map")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.iterator.reduce")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/iterator/reduce")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.iterator.some")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/iterator/some")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.iterator.take")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/iterator/take")])])]),t._v(" "),e("tr",[e("td",[t._v("Iterator helpers")]),t._v(" "),e("td",[e("code",[t._v("esnext.iterator.to-array")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/iterator/to-array")])])]),t._v(" "),e("tr",[e("td",[t._v("esnext.set.difference`")]),t._v(" "),e("td"),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("New Set methods")]),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/set-methods")])])]),t._v(" "),e("tr",[e("td",[t._v("New Set methods")]),t._v(" "),e("td",[e("code",[t._v("esnext.set.intersection")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/set/intersection")])])]),t._v(" "),e("tr",[e("td",[t._v("New Set methods")]),t._v(" "),e("td",[e("code",[t._v("esnext.set.is-disjoint-from")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/set/is-disjoint-from")])])]),t._v(" "),e("tr",[e("td",[t._v("New Set methods")]),t._v(" "),e("td",[e("code",[t._v("esnext.set.is-subset-of")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/set/is-subset-of")])])]),t._v(" "),e("tr",[e("td",[t._v("New Set methods")]),t._v(" "),e("td",[e("code",[t._v("esnext.set.is-superset-of")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/set/is-superset-of")])])]),t._v(" "),e("tr",[e("td",[t._v("New Set methods")]),t._v(" "),e("td",[e("code",[t._v("esnext.set.symmetric-difference")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/set/symmetric-difference")])])]),t._v(" "),e("tr",[e("td",[t._v("New Set methods")]),t._v(" "),e("td",[e("code",[t._v("esnext.set.union")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/set/union")])])]),t._v(" "),e("tr",[e("td",[t._v("Map.prototype.emplace")]),t._v(" "),e("td",[e("code",[t._v("esnext.map.emplace")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/map/emplace")])])]),t._v(" "),e("tr",[e("td",[t._v("Map.prototype.emplace")]),t._v(" "),e("td",[e("code",[t._v("esnext.weak-map.emplace")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/weak-map/emplace")])])]),t._v(" "),e("tr",[e("td",[t._v("Array.isTemplateObject")]),t._v(" "),e("td",[e("code",[t._v("esnext.array.is-template-object")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/array-is-template-object")]),e("br"),e("code",[t._v("core-js(-pure)/features/array/is-template-object")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.symbol.dispose")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/symbol/dispose")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.symbol.async-dispose")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/symbol/async-dispose")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.symbol.metadata")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/decorators")]),e("br"),e("code",[t._v("core-js(-pure)/features/symbol/metadata")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h4",{attrs:{id:"stage-1-proposals"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#stage-1-proposals"}},[t._v("#")]),t._v(" "),e("code",[t._v("Stage 1 proposals")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.observable")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/observable")]),e("br"),e("code",[t._v("core-js(-pure)/features/observable")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.symbol.observable")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/symbol/observable")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.set.add-all")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/set/add-all")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.set.delete-all")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/set/delete-all")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.set.every")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/set/every")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.set.filter")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/set/filter")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.set.find")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/set/find")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.set.join")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/set/join")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.set.map")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/set/map")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.set.reduce")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/set/reduce")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.set.some")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/set/some")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.map.delete-all")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/map/delete-all")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.map.every")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/map/every")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.map.filter")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/map/filter")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.map.find")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/map/find")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.map.find-key")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/map/find-key")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.map.group-by")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/map/group-by")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.map.includes")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/map/includes")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.map.key-by")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/map/key-by")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.map.key-of")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/map/key-of")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.map.map-keys")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/map/map-keys")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.map.map-values")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/map/map-values")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.map.merge")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/map/merge")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.map.reduce")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/map/reduce")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.map.some")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/map/some")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.map.update")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/map/update")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.weak-set.add-all")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/weak-set/add-all")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.weak-set.delete-all")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/weak-set/delete-all")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.weak-map.delete-all")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/weak-map/delete-all")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.set.of")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/weak-set/of")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.set.from")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/weak-set/from")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.map.of")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/weak-map/of")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.map.from")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/weak-map/from")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.weak-set.of")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/weak-set/of")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.weak-set.from")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/weak-set/from")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.weak-map.of")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/weak-map/of")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.weak-map.from")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/weak-map/from")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.composite-key")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/keys-composition")]),e("br"),e("code",[t._v("core-js(-pure)/features/composite-key")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.composite-symbol")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/composite-symbol")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.array.filter-reject")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/weak-set/from")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.esnext.array.filter-reject")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/array-filtering")]),e("br"),e("code",[t._v("core-js(-pure)/features/array(/virtual)/filter-reject")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.typed-array.filter-reject")])]),t._v(" "),e("td",[e("code",[t._v("core-js/features/typed-array/filter-reject")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.array.group-by")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/array-grouping")]),e("br"),e("code",[t._v("core-js(-pure)/features/array(/virtual)/group-by")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.typed-array.group-by")])]),t._v(" "),e("td",[e("code",[t._v("core-js/features/typed-array/group-by")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.array.unique-by")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/array-unique")]),e("br"),e("code",[t._v("core-js(-pure)/features/array(/virtual)/unique-by")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.typed-array.unique-by")])]),t._v(" "),e("td",[e("code",[t._v("core-js/features/typed-array/unique-by")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.array.last-item")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/array-last")]),e("br"),e("code",[t._v("core-js/features/array/last-item")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.array.last-index")])]),t._v(" "),e("td",[e("code",[t._v("core-js/features/array/last-index")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.number.range")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/number-range")]),e("br"),e("code",[t._v("core-js(-pure)/features/bigint/range")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.bigint.range")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/number/range")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.number.from-string")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/number-from-string")]),e("br"),e("code",[t._v("core-js(-pure)/features/number/from-string")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.math.clamp")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/math/clamp")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.math.deg-per-rad")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/math/deg-per-rad")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.math.degrees")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/math/degrees")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.math.fscale")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/math/fscale")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.math.rad-per-deg")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/math/rad-per-deg")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.math.radians")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/math/radians")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.math.scale")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/math/scale")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.math.signbit")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/math-signbit")]),e("br"),e("code",[t._v("core-js(-pure)/features/math/signbit")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.string.code-points")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/string-code-points")]),e("br"),e("code",[t._v("core-js(-pure)/features/string/code-points")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.symbol.matcher")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/pattern-matching")]),e("br"),e("code",[t._v("core-js(-pure)/features/symbol/matcher")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.math.seeded-prng")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/seeded-random")]),e("br"),e("code",[t._v("core-js(-pure)/features/math/seeded-prng")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/object-iteration")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.object.iterate-keys")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/object/iterate-keys")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.object.iterate-values")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/object/iterate-values")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.object.iterate-entries")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/object/iterate-entries")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.promise.try")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/promise-try")]),e("br"),e("code",[t._v("core-js(-pure)/features/promise/try")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h4",{attrs:{id:"stage-0-proposals"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#stage-0-proposals"}},[t._v("#")]),t._v(" "),e("code",[t._v("Stage 0 proposals")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("URL")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.string.at")])]),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/string-at")]),e("br"),e("code",[t._v("core-js(-pure)/features/string/at")]),e("br"),e("code",[t._v("core-js(-pure)/features/string/virtual/")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/efficient-64-bit-arithmetic")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.math.iaddh")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/math/iaddh")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.math.isubh")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/math/isubh")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.math.imulh")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/math/imulh")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.math.umulh")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/math/umulh")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h4",{attrs:{id:"pre-stage-0-proposals"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pre-stage-0-proposals"}},[t._v("#")]),t._v(" "),e("code",[t._v("Pre-stage 0 proposals")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td"),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("core-js/proposals/reflect-metadata")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.reflect.define-metadata")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/reflect/define-metadata")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.reflect.delete-metadata")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/reflect/delete-metadata")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.reflect.get-metadata")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/reflect/get-metadata")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.reflect.get-metadata-keys")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/reflect/get-metadata-keys")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.reflect.get-own-metadata")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/reflect/get-own-metadata")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.reflect.get-own-metadata-keys")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/reflect/get-own-metadata-keys")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.reflect.has-metadata")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/reflect/has-metadata")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.reflect.has-own-metadata")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/reflect/has-own-metadata")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("esnext.reflect.metadata")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/features/reflect/metadata")])])])])])]),t._v(" "),e("li",[e("p",[t._v("重点实现")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h3",{attrs:{id:"web-标准-api-的补丁"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#web-标准-api-的补丁"}},[t._v("#")]),t._v(" WEB 标准 API 的补丁")]),t._v(" "),e("h4",{attrs:{id:"特性列表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#特性列表"}},[t._v("#")]),t._v(" 特性列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("分类")]),t._v(" "),e("th",[t._v("模块")]),t._v(" "),e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("路径")])])]),t._v(" "),e("tbody",[e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("web.timers")])]),t._v(" "),e("td",[e("code",[t._v("setTimeout")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/stable|features/set-timeout")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("web.timers")])]),t._v(" "),e("td",[e("code",[t._v("setInterval")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/stable|features/set-interval")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("web.immediate")])]),t._v(" "),e("td",[e("code",[t._v("setImmediate")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/stable|features/set-immediate")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("web.immediate")])]),t._v(" "),e("td",[e("code",[t._v("clearImmediate")])]),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/stable|features/clear-immediate")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("web.queue-microtask")])]),t._v(" "),e("td",[e("code",[t._v("queueMicrotask")])]),t._v(" "),e("td",[e("code",[t._v("core-js/web/queue-microtask")]),e("br"),e("code",[t._v("core-js(-pure)/stable|features/queue-microtask")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("web.url")])]),t._v(" "),e("td"),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("web.url.to-json")])]),t._v(" "),e("td"),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("web.url-search-params")])]),t._v(" "),e("td"),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("web.dom-collections.iterator")])]),t._v(" "),e("td"),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("web.dom-collections.for-each")])]),t._v(" "),e("td"),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("web.dom-collections.iterator")])]),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("core-js(-pure)/stable|features/dom-collections/iterator")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("code",[t._v("web.dom-collections.for-each")])]),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("core-js/stable|features/dom-collections/for-each")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td"),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("core-js-pure/es|stable|features/is-iterable")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td"),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("core-js-pure/es|stable|features/get-iterator")])])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td"),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("core-js-pure/es|stable|features/get-iterator-method")])])])])]),t._v(" "),e("p",[t._v("core-js 中和 WEB 标准相关的 API 实现，定义在 "),e("code",[t._v("core-js/packages/core-js/web/")]),t._v(" 目录下，并实现了以下 API:")]),t._v(" "),e("h4",{attrs:{id:"dom-collections"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dom-collections"}},[t._v("#")]),t._v(" dom-collections")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("介绍")]),t._v(" "),e("p",[t._v("dom-collections 表示 HTML 中获取 DOM 节点集的一系列方法。")]),t._v(" "),e("p",[t._v("下表是文件 "),e("code",[t._v("core-js/packages/core-js/internals/dom-iterables.js")]),t._v(" 列举的 dom-collections:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("dom-collection")]),t._v(" "),e("th",[t._v("作用")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("CSSRuleList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("CSSStyleDeclaration")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("CSSValueList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("ClientRectList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("DOMRectList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("DOMStringList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("DOMTokenList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("DataTransferItemList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("FileList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("HTMLAllCollection")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("HTMLCollection")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("HTMLFormElement")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("HTMLSelectElement")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("MediaList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("MimeTypeArray")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("NamedNodeMap")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("NodeList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("PaintRequestList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("Plugin")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("PluginArray")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("SVGLengthList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("SVGNumberList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("SVGPathSegList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("SVGPointList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("SVGStringList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("SVGTransformList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("SourceBufferList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("StyleSheetList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("TextTrackCueList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("TextTrackList")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("TouchList")])]),t._v(" "),e("td")])])])]),t._v(" "),e("li",[e("p",[t._v("补丁")]),t._v(" "),e("p",[t._v("core-js 为上述 dom-collection 方法添加了一系列补丁，目的是为其确保实现了 "),e("code",[t._v("for-each/iterator")]),t._v(" 系列方法:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../modules/web.dom-collections.for-each'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 确保 for-each 实现")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../modules/web.dom-collections.iterator'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 确保 iterator 实现")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" path "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../internals/path'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("ul",[e("li",[e("p",[t._v("for-each")]),t._v(" "),e("p",[t._v("core-js 在文件 "),e("code",[t._v("core-js/packages/core-js/internals/array-iteration.js")]),t._v(" 定义了和数组相关的多个方法的补丁，总体来说，"),e("code",[t._v("forEach/map/filter/some/every/find/findIndex/filterOut")]),t._v(" 均用 "),e("code",[t._v("for")]),t._v(" 循环实现。")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" global "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../internals/global'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 全局对象")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" DOMIterables "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../internals/dom-iterables'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" forEach "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../internals/array-for-each'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// core-js 自身实现的 forEach")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" createNonEnumerableProperty "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../internals/create-non-enumerable-property'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// COLLECTION_NAME: CSSRuleList/CSSStyleDeclaration/CSSValueList/...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COLLECTION_NAME")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" DOMIterables"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" Collection "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" global"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COLLECTION_NAME")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" CollectionPrototype "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Collection "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Collection")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// some Chrome versions have non-configurable methods on DOMTokenList")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CollectionPrototype "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" CollectionPrototype"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("forEach "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" forEach"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("createNonEnumerableProperty")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CollectionPrototype"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'forEach'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" forEach"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        CollectionPrototype"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("forEach "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" forEach"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br")])]),e("p",[t._v("从源码可以看出，core-js 会给浏览器支持的 dom-collections API，以 "),e("code",[t._v("Object.defineProperty")]),t._v(" 或直接赋值的方式提供 "),e("code",[t._v("forEach")]),t._v(" 方法实现。")])]),t._v(" "),e("li",[e("p",[t._v("iterator")]),t._v(" "),e("p",[t._v("core-js 在 "),e("code",[t._v("core-js/packages/core-js/modules/web.dom-collections.iterator.js")]),t._v(" 文件定义了对 iterator 的实现。")]),t._v(" "),e("p",[t._v("TODO")])])])])]),t._v(" "),e("h4",{attrs:{id:"immediate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#immediate"}},[t._v("#")]),t._v(" immediate")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("immediate介绍")]),t._v(" "),e("p",[t._v("TODO")])]),t._v(" "),e("li",[e("p",[t._v("兼容性判断")]),t._v(" "),e("p",[t._v("core-js 提供了 "),e("code",[t._v("setImmediate/clearImmediate")]),t._v(" 的兼容性实现。")]),t._v(" "),e("p",[t._v("在文件 "),e("code",[t._v("core-js/packages/core-js/modules/web.immediate.js")]),t._v(" 中可以看到，在实现 "),e("code",[t._v("setImmediate")]),t._v(" 时，做出了以下处理:")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("如果 "),e("code",[t._v("setImmediate/clearImmediate")]),t._v(" 均已被支持，则不再处理")])]),t._v(" "),e("li",[e("p",[t._v("如果 "),e("code",[t._v("setImmediate/clearImmediate")]),t._v(" 有任何一个没有被支持，则手动实现 "),e("code",[t._v("setImmediate/clearImmediate")]),t._v("，并赋值到全局对象")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FORCED")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("global"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setImmediate "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("global"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clearImmediate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// http://w3c.github.io/setImmediate/")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("global")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("bind")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("enumerable")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("forced")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FORCED")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// `setImmediate` method")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// http://w3c.github.io/setImmediate/#si-setImmediate")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("setImmediate")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" task"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// `clearImmediate` method")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// http://w3c.github.io/setImmediate/#si-clearImmediate")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("clearImmediate")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" task"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clear\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])])])])]),t._v(" "),e("li",[e("p",[t._v("补丁")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("set")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setImmediate")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("fn")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" args "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arguments"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" i"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" args"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arguments"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将 fn 推入队列")]),t._v("\n    queue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("counter"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" fn "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'function'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" fn "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将当前处理逻辑的索引注册到待执行函数")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 待执行函数根据不同环境有不同实现")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("defer")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("counter"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回数字形式的“句柄”")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" counter"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("clear")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearImmediate")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delete")]),t._v(" queue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br")])]),e("p",[t._v("通过自定义的 "),e("code",[t._v("setImmediate")]),t._v(" 方法，做到了:")]),t._v(" "),e("ul",[e("li",[t._v("维护一个执行队列，按顺序执行处理逻辑，用 "),e("code",[t._v("queue")]),t._v(" 数组维护")]),t._v(" "),e("li",[t._v("将当前处理逻辑的索引注册到待执行函数，用 "),e("code",[t._v("defer")]),t._v(" 方法实现，"),e("code",[t._v("defer")]),t._v(" 会根据不同环境有不同的实现")]),t._v(" "),e("li",[t._v("最终返回数字形式的“句柄”")])]),t._v(" "),e("p",[t._v("defer 的实现依据以下先后顺序:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("process.nextTick")]),t._v(": 如果是 Node 环境")]),t._v(" "),e("li",[e("code",[t._v("Dispatch.now")]),t._v(": 如果是 Sphere 游戏引擎环境")]),t._v(" "),e("li",[e("code",[t._v("MessageChannel")]),t._v(": 如果不是 iOS 环境，且支持 MessageChannel")]),t._v(" "),e("li",[e("code",[t._v("postMessage")]),t._v(": 如果支持 postMessage")]),t._v(" "),e("li",[e("code",[t._v("createElement('script')")]),t._v(" 的 "),e("code",[t._v("onreadystatechange")]),t._v(" 事件")]),t._v(" "),e("li",[e("code",[t._v("setTimeout")])])])])]),t._v(" "),e("h4",{attrs:{id:"queue-microtask"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#queue-microtask"}},[t._v("#")]),t._v(" queue-microtask")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("介绍")]),t._v(" "),e("p",[t._v("https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_DOM_API/Microtask_guide")])]),t._v(" "),e("li",[e("p",[t._v("补丁")]),t._v(" "),e("p",[t._v("TODO")])])]),t._v(" "),e("h4",{attrs:{id:"timers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#timers"}},[t._v("#")]),t._v(" timers")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("介绍")]),t._v(" "),e("p",[t._v("timers 指的就是 "),e("code",[t._v("setTimeout/setInterval")]),t._v("，二者的使用方式如下:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("setTimeout(handler[, delay, arg1, arg2, ...])")])]),t._v(" "),e("li",[e("code",[t._v("setInterval(handler, delay, [arg1, arg2, ...])")])])])]),t._v(" "),e("li",[e("p",[t._v("补丁")]),t._v(" "),e("p",[t._v("core-js 对 timers 的补丁位于 "),e("code",[t._v("core-js/packages/core-js/modules/web.timers.js")]),t._v("，IE9 及以下版本会强制使用 core-js 自定义的实现。")]),t._v(" "),e("p",[t._v("实现代码:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" $ "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../internals/export'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" global "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../internals/global'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" userAgent "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../internals/engine-user-agent'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" slice "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("slice"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MSIE")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token regex"}},[e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("MSIE .\\.")]),e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userAgent"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// <- dirty ie9- check")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("wrap")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("scheduler")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handler"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timeout "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* , ...arguments */")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" boundArgs "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" arguments"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" args "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" boundArgs "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arguments"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("scheduler")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            boundArgs \n            "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" \n            "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" handler "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'function'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" handler "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handler"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n            "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" \n            handler"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        \n            timeout\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ie9- setTimeout & setInterval additional parameters fix")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timers")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("global")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("bind")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("forced")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MSIE")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// `setTimeout` method")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-settimeout")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("setTimeout")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wrap")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("global"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setTimeout"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// `setInterval` method")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-setinterval")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("setInterval")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wrap")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("global"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setInterval"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br"),e("span",{staticClass:"line-number"},[t._v("22")]),e("br"),e("span",{staticClass:"line-number"},[t._v("23")]),e("br"),e("span",{staticClass:"line-number"},[t._v("24")]),e("br"),e("span",{staticClass:"line-number"},[t._v("25")]),e("br"),e("span",{staticClass:"line-number"},[t._v("26")]),e("br"),e("span",{staticClass:"line-number"},[t._v("27")]),e("br"),e("span",{staticClass:"line-number"},[t._v("28")]),e("br"),e("span",{staticClass:"line-number"},[t._v("29")]),e("br"),e("span",{staticClass:"line-number"},[t._v("30")]),e("br"),e("span",{staticClass:"line-number"},[t._v("31")]),e("br"),e("span",{staticClass:"line-number"},[t._v("32")]),e("br"),e("span",{staticClass:"line-number"},[t._v("33")]),e("br"),e("span",{staticClass:"line-number"},[t._v("34")]),e("br"),e("span",{staticClass:"line-number"},[t._v("35")]),e("br")])]),e("p",[t._v("可以看到，如果传入的 "),e("code",[t._v("handler")]),t._v(" 不是函数，则用 "),e("code",[t._v("Function(handler)).apply(this, args)")]),t._v(" 的方式调用")])])]),t._v(" "),e("h4",{attrs:{id:"url"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#url"}},[t._v("#")]),t._v(" url")]),t._v(" "),e("p",[t._v("core-js 对 url 的兼容性支持体现在三个子功能: "),e("code",[t._v("URL")]),t._v(" 构造函数、"),e("code",[t._v("URL.prototype.toJSON")]),t._v("、"),e("code",[t._v("URLSearchParams")]),t._v(" 构造函数。")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("对WAHTWG标准的兼容性判断")]),t._v(" "),e("p",[e("code",[t._v("core-js/packages/core-js/internals/native-url.js")]),t._v(" 文件描述了如何判断运行环境是否支持标准的 "),e("code",[t._v("URLSearchParams")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" fails "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../internals/fails'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" wellKnownSymbol "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../internals/well-known-symbol'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IS_PURE")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../internals/is-pure'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ITERATOR")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wellKnownSymbol")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'iterator'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回值描述了宿主环节是否已支持 URLSearchParams")]),t._v("\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("fails")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" url "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("URL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'b?a=1&b=2&c=3'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://a'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" searchParams "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("searchParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" result "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pathname "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'c%20d'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    searchParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        searchParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'delete'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'b'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        result "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" key "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IS_PURE")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("toJSON"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("searchParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sort\n        "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://a/c%20d?a=1&c=3'")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" searchParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'c'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3'")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("String")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("URLSearchParams")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'?a=1'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a=1'")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("searchParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ITERATOR")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// throws in Edge")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("URL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://a@b'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("username "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("URLSearchParams")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("URLSearchParams")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a=b'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'b'")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// not punycoded in Edge")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("URL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://тест'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("host "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xn--e1aybc'")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// not escaped in Chrome 62-")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("URL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://a#б'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hash "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#%D0%B1'")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// fails in Chrome 66-")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" result "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a1c3'")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// throws in Safari")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("URL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://x'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("host "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'x'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br"),e("span",{staticClass:"line-number"},[t._v("22")]),e("br"),e("span",{staticClass:"line-number"},[t._v("23")]),e("br"),e("span",{staticClass:"line-number"},[t._v("24")]),e("br"),e("span",{staticClass:"line-number"},[t._v("25")]),e("br"),e("span",{staticClass:"line-number"},[t._v("26")]),e("br"),e("span",{staticClass:"line-number"},[t._v("27")]),e("br"),e("span",{staticClass:"line-number"},[t._v("28")]),e("br"),e("span",{staticClass:"line-number"},[t._v("29")]),e("br"),e("span",{staticClass:"line-number"},[t._v("30")]),e("br"),e("span",{staticClass:"line-number"},[t._v("31")]),e("br"),e("span",{staticClass:"line-number"},[t._v("32")]),e("br"),e("span",{staticClass:"line-number"},[t._v("33")]),e("br"),e("span",{staticClass:"line-number"},[t._v("34")]),e("br")])]),e("p",[e("code",[t._v("fails")]),t._v(" 方法接收一个执行函数，并在内部使用 "),e("code",[t._v("try...catch...")]),t._v(" 执行该函数，若执行失败（有报错情况），"),e("code",[t._v("fails()")]),t._v(" 方法返回 "),e("code",[t._v("true")]),t._v("，否则返回 "),e("code",[t._v("false")]),t._v("，这是 "),e("code",[t._v("fails()")]),t._v(" 方法的实现：")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("module"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("exec")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("exec")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br")])]),e("p",[t._v("如果运行时环境不支持标准的 "),e("code",[t._v("url")]),t._v(" 定义，core-js 会提供自己的 API 实现 "),e("code",[t._v("url")]),t._v(" 的一些特性，如:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("URL")]),t._v(" 构造函数的补丁定义在文件 "),e("code",[t._v("core-js/packages/core-js/modules/web.url.js")])]),t._v(" "),e("li",[e("code",[t._v("URLSearchParams")]),t._v(" 的补丁定义在文件 "),e("code",[t._v("core-js/packages/core-js/modules/web.url-search-params.js")])])])]),t._v(" "),e("li",[e("p",[t._v("对 url 的统一处理")]),t._v(" "),e("p",[e("code",[t._v("core-js/packages/core-js/web/url.js")]),t._v(" 文件提供了对 url 各个特征的处理:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../modules/web.url'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../modules/web.url.to-json'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../modules/web.url-search-params'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("p",[e("code",[t._v("web.url.js")]),t._v(" 文件提供了基于 WHATWG 标准的各个特征的实现。")]),t._v(" "),e("p",[e("code",[t._v("web.url.to-json")]),t._v(" 提供了 "),e("code",[t._v("URL.prototype.toJSON")]),t._v(" 的实现。")]),t._v(" "),e("p",[e("code",[t._v("web.url-search-params")]),t._v(" 提供了 "),e("code",[t._v("URLSearchParams")]),t._v(" 的实现。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("URL")]),t._v(" 构造函数")]),t._v(" "),e("p",[t._v("TODO")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("URLSearchParams")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("介绍")]),t._v(" "),e("p",[e("code",[t._v("URLSearchParams")]),t._v(" 接口定义了一些实用的方法来处理 URL 的查询字符串，比如:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" paramsString "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"q=URLUtils.searchParams&topic=api"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" searchParams "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("URLSearchParams")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("paramsString"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" p "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" searchParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [ 'q', 'URLUtils.searchParams' ]，[ 'topic', 'api' ]")]),t._v("\n\nsearchParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("has")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"topic"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\nsearchParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"topic"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"api"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\nsearchParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAll")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"topic"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// ["api"]')]),t._v("\nsearchParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foo"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\nsearchParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("append")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"topic"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webdev"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nsearchParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "q=URLUtils.searchParams&topic=api&topic=webdev"')]),t._v("\nsearchParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"topic"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"More webdev"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nsearchParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "q=URLUtils.searchParams&topic=More+webdev"')]),t._v("\nsearchParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"topic"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nsearchParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "q=URLUtils.searchParams"')]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br")])]),e("p",[t._v("根据WHATWG的标准，core-js提供了不满足该标准的运行环境下的补丁。")])]),t._v(" "),e("li",[e("p",[t._v("补丁")]),t._v(" "),e("p",[t._v("TODO")])])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("URL.prototype.toJSON")])]),t._v(" "),e("p",[t._v("有独立的文件 "),e("code",[t._v("core-js/packages/core-js/modules/web.url.to-json.js")]),t._v(" 描述了该实现:")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'use strict'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" $ "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../internals/export'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// `URL.prototype.toJSON` method")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://url.spec.whatwg.org/#dom-url-tojson")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("target")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'URL'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("proto")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("enumerable")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("toJSON")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("toJSON")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("URL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br")])]),e("p",[t._v("可以看到，"),e("code",[t._v("toJSON")]),t._v(" 的实现和 "),e("code",[t._v("toString")]),t._v(" 一致，注意，这里并没有涉及兼容性的处理，是因为 "),e("code",[t._v("toString")]),t._v(" 方法在此之前已经被兼容性处理过了。")]),t._v(" "),e("p",[t._v("不过，由于 "),e("code",[t._v("web.url.js")]),t._v(" 也提供了 "),e("code",[t._v("toJSON")]),t._v(" 的实现，这一步并没有必要了。")])])]),t._v(" "),e("h3",{attrs:{id:"缺失的补丁"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#缺失的补丁"}},[t._v("#")]),t._v(" 缺失的补丁")]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("BigInt")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("介绍")]),t._v(" "),e("p",[t._v("TODO")])]),t._v(" "),e("li",[e("p",[t._v("补丁缺失的原因")]),t._v(" "),e("p",[t._v("TODO")])])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("Proxy")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("介绍")]),t._v(" "),e("p",[t._v("TODO")])]),t._v(" "),e("li",[e("p",[t._v("补丁缺失的原因")]),t._v(" "),e("p",[t._v("TODO")])])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("String#normalize")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("介绍")]),t._v(" "),e("p",[t._v("TODO")])]),t._v(" "),e("li",[e("p",[t._v("补丁缺失的原因")]),t._v(" "),e("p",[t._v("TODO")])])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("Intl")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("介绍")]),t._v(" "),e("p",[t._v("TODO")])]),t._v(" "),e("li",[e("p",[t._v("补丁缺失的原因")]),t._v(" "),e("p",[t._v("TODO")])])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("window.fetch")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("介绍")]),t._v(" "),e("p",[t._v("TODO")])]),t._v(" "),e("li",[e("p",[t._v("补丁缺失的原因")]),t._v(" "),e("p",[t._v("TODO")])])])])])])}),[],!1,null,null,null);s.default=r.exports}}]);