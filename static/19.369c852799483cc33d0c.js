webpackJsonp([19],{"20cE":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(o("Xxa5")),a=i(o("exGp")),_=i(o("E2NI")),r=i(o("8ZY1"));function i(t){return t&&t.__esModule?t:{default:t}}_.default.crypto;e.default={props:{prop__showCancel:{type:Boolean,default:!0},prop__showConfirm:{type:Boolean,default:!0},prop__onConfirmForm:{type:Function,default:function(){}}},data:function(){return{data__isWorking:!1,data__model:{token:"",repos:"",branch:"master"},data__error:{token:"",repos:"",branch:""}}},components:{ModLoading:r.default},mounted:function(){var t=this;return(0,a.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initInputs();case 2:case"end":return e.stop()}},e,t)}))()},methods:{initInputs:function(){var t=this;return(0,a.default)(n.default.mark(function e(){var o,a,r;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.default.method__getGithubDataFromLoginData(t);case 2:if(o=e.sent){a=o.token,r=o.repoList;try{t.data__model.token=a,t.data__model.repos=r.map(function(t){var e=t.repo;t.branch;return e}).join("; "),t.data__model.branch="master"}catch(t){}}case 4:case"end":return e.stop()}},e,t)}))()},method__checkRepo:function(){this.data__model.repos?this.data__error.repos="":this.data__error.repos="account__githubRepoBlankError"},method__checkToken:function(){this.data__model.token?this.data__error.token="":this.data__error.token="account__githubTokenBlankError"},method__checkBranch:function(){this.data__model.branch?this.data__error.branch="":this.data__error.branch="account__githubBranchBlankError"},method__onCancel:function(){this.$emit("cancel"),this.$emit("input",!1)},method__formatReposToArr:function(t){return(t=t.replace(/(\,)|(\，)|(\；)/g,";")).split(";").map(function(t){return t=t.trim().replace(/\.git$/,"").split("/").pop()}).filter(function(t){return!!t})},method__onConfirm:function(){var t=this;return(0,a.default)(n.default.mark(function e(){var o;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.method__checkToken(),t.method__checkRepo(),t.method__checkBranch(),!(t.data__error.token||t.data__error.repos||t.data__error.branch)){e.next=5;break}return e.abrupt("return");case 5:return t.$loading.open({desc:"checking..."}),e.t0=t,e.next=9,_.default.method__getGithubApiUrl(t,{type:"user"});case 9:return e.t1=e.sent,e.t2={token:t.data__model.token},e.t3={url:e.t1,method:"GET",forcedParams:e.t2},e.next=14,e.t0.$ajax.call(e.t0,e.t3);case 14:o=e.sent,t.$loading.close(),o.success?t.$emit("confirm",{token:t.data__model.token,repoList:t.method__formatReposToArr(t.data__model.repos).map(function(e){return{repo:e,branch:t.data__model.branch}})}):t.$toast({message:"校验失败，请检查 token 是否存在，或项目及分支是否被创建"});case 17:case"end":return e.stop()}},e,t)}))()}}}},"5P/5":function(t,e){},"5oLH":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("GG5R"),a=o.n(n),_=o("dqhN");var r=function(t){o("X9rG")},i=o("VU/8")(a.a,_.a,r,"data-v-21933fec",null);e.default=i.exports},"6YVb":function(t,e){},"8ZY1":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("Y4T6"),a=o.n(n),_=o("YDLw");var r=function(t){o("5P/5")},i=o("VU/8")(a.a,_.a,r,null,null);e.default=i.exports},DVU1:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("MCX0"),a=o.n(n),_=o("Esfj");var r=function(t){o("6YVb")},i=o("VU/8")(a.a,_.a,r,"data-v-525e3b0c",null);e.default=i.exports},Esfj:function(t,e,o){"use strict";var n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"modal",class:["modal--theme-"+t.$store.state.theme],style:{zIndex:1e3+t.prop__zindexPlus}},[o("div",{staticClass:"modal__body",style:{width:t.prop__width,padding:t.prop__padding}},[t.prop__title?o("div",{staticClass:"modal__title"},[t._v(t._s(t.prop__title))]):t._e(),t._v(" "),t._t("default")],2),t._v(" "),o("div",{staticClass:"modal__bg",on:{click:t.method__onBgClick}})])},staticRenderFns:[]};e.a=n},GG5R:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=_(o("DVU1")),a=_(o("iTs+"));function _(t){return t&&t.__esModule?t:{default:t}}e.default={props:{prop__showCancel:{type:Boolean,default:!0},prop__showConfirm:{type:Boolean,default:!0}},components:{Modal:n.default,ModFormGithubFiles:a.default},methods:{method__onConfirm:function(t){this.$emit("confirm",t)},method__onCancel:function(){this.$emit("cancel")}}}},MCX0:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(o("0CtP")),n(o("E2NI"));function n(t){return t&&t.__esModule?t:{default:t}}e.default={props:{prop__zindexPlus:{type:Number,default:0},prop__title:{type:String,default:""},prop__showCancel:{type:Boolean,default:!0},prop__showConfirm:{type:Boolean,default:!0},prop__width:{type:String,default:"600px"},prop__padding:{type:String,default:""}},data:function(){return{}},computed:{},methods:{method__onBgClick:function(){this.$emit("bgClick")}},mounted:function(){document.body.appendChild(this.$el)},destroyed:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}}},Omjp:function(t,e,o){"use strict";var n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"g__modal__box"},[o("div",{staticClass:"g__modal__title"},[t._v("存储到 Github")]),t._v(" "),o("div",{staticClass:"g__input__box"},[t._m(0),t._v(" "),t._m(1),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.data__model.token,expression:"data__model.token"}],staticClass:"g__input__box__input",attrs:{type:"text",name:"",id:"",placeholder:"请输入一个有效的 token 值"},domProps:{value:t.data__model.token},on:{input:function(e){e.target.composing||(t.data__model.token=e.target.value)}}}),t._v(" "),t.data__error.token?o("div",{staticClass:"g__input__box__error"},[t._v("请输入一个有效的 token 值")]):t._e()]),t._v(" "),o("div",{staticClass:"g__input__box"},[o("div",{staticClass:"g__input__box__title"},[t._v("Github 仓库名称列表")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.data__model.repos,expression:"data__model.repos"}],staticClass:"g__input__box__input",attrs:{type:"text",name:"",id:"",placeholder:"仓库名称"},domProps:{value:t.data__model.repos},on:{input:function(e){e.target.composing||(t.data__model.repos=e.target.value)}}}),t._v(" "),t.data__error.repos?o("div",{staticClass:"g__input__box__error"},[t._v("仓库名称，多个仓库用英文逗号区分")]):t._e()]),t._v(" "),o("div",{staticClass:"g__input__box"},[o("div",{staticClass:"g__input__box__title"},[t._v("分支名称（暂时只支持 master 分支）: master")]),t._v(" "),t.data__error.branch?o("div",{staticClass:"g__input__box__error"},[t._v("分支名称")]):t._e()]),t._v(" "),t.prop__showCancel||t.prop__showConfirm?o("div",{staticClass:"g__form__buttons"},[t.prop__showCancel?o("div",{staticClass:"g__form__buttons__item g__form__buttons__item--cancel",on:{click:t.method__onCancel}},[t._v(t._s(t.$t("modal__cancel")))]):t._e(),t._v(" "),t.prop__showConfirm?o("div",{staticClass:"g__form__buttons__item g__form__buttons__item--confirm",on:{click:t.method__onConfirm}},[t._v(t._s(t.$t("modal__confirm")))]):t._e()]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"g__input__box__title"},[this._v("请输入一个有效的 token 值"),e("a",{staticClass:"g__input__box__title__desc",attrs:{href:"https://github.com/settings/tokens/new",target:"_blank"}},[this._v("申请 token")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"g__input__box__desclist"},[e("div",{staticClass:"g__input__box__desclist__item"},[this._v('1. 请至少勾选一级选项 "repo"')]),this._v(" "),e("div",{staticClass:"g__input__box__desclist__item"},[this._v("2. 请确保仓库和分支已创建")])])}]};e.a=n},X9rG:function(t,e){},Y4T6:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{visible:{type:Boolean,default:!1},showMask:{type:Boolean,default:!1}},data:function(){return{}}}},YDLw:function(t,e,o){"use strict";var n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticStyle:{"enable-background":"new 0 0 50 50"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 50 50","xml:space":"preserve"}},[e("path",{attrs:{fill:"#fff",d:"M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z"}},[e("animateTransform",{attrs:{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"}})],1)])},staticRenderFns:[]};e.a=n},dqhN:function(t,e,o){"use strict";var n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("Modal",{attrs:{prop__title:this.$t("storage__github"),prop__width:"500px"},on:{bgClick:this.method__onCancel}},[e("ModFormGithubFiles",{attrs:{prop__showConfirm:this.prop__showConfirm,prop__showCancel:this.prop__showCancel},on:{confirm:this.method__onConfirm,cancel:this.method__onCancel}})],1)},staticRenderFns:[]};e.a=n},"iTs+":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("20cE"),a=o.n(n),_=o("Omjp");var r=function(t){o("kFlc")},i=o("VU/8")(a.a,_.a,r,"data-v-1ab904e8",null);e.default=i.exports},kFlc:function(t,e){}});